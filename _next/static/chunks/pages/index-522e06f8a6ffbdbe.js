(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(3798)}])},3798:function(e,t,n){"use strict";let a,s,i,l,r,o,u;n.r(t),n.d(t,{default:function(){return eV}});var c,d,p,h,f,m,v,y,b,P,g,x,_,M,j,D,w,F,N,C=n(5893),A=n(2083),k=n.n(A),S=n(9008),G=n.n(S),E=n(7294),T=Object.defineProperty,B=Object.defineProperties,z=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,W=(e,t,n)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,V=(e,t)=>{for(var n in t||(t={}))R.call(t,n)&&W(e,n,t[n]);if(I)for(var n of I(t))O.call(t,n)&&W(e,n,t[n]);return e},$=(e,t)=>B(e,z(t)),U=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},L=(e,t,n)=>(U(e,t,"read from private field"),n?n.call(e):t.get(e)),H=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},X=(e,t,n,a)=>(U(e,t,"write to private field"),a?a.call(e,n):t.set(e,n),n),q=(e,t,n)=>new Promise((a,s)=>{var i=e=>{try{r(n.next(e))}catch(e){s(e)}},l=e=>{try{r(n.throw(e))}catch(e){s(e)}},r=e=>e.done?a(e.value):Promise.resolve(e.value).then(i,l);r((n=n.apply(e,t)).next())});function Z(e,t){return q(this,null,function*(){t=t.replace(/#/g,"%23").replace(/([^:]\/)\/+/g,"$1");let n=yield fetch(t);if(200!==n.status){console.warn("Error loading buffer. Invalid status: ",n.status,t);return}try{let t=yield n.arrayBuffer(),a=yield e.decodeAudioData(t);return a}catch(e){console.warn("Error loading buffer",e,t)}})}function K(e){if("undefined"==typeof document)return null;let t=document.createElement("audio");for(let n=0;n<e.length;n++){let a=e[n],s=t.canPlayType(`audio/${a}`);if("probably"===s||"maybe"===s)return a;if("m4a"===a){let e=t.canPlayType("audio/aac");if("probably"===e||"maybe"===e)return a}}return null}function J(e){let t=e.filter(e=>!!e);return t.reduce((e,t)=>{let n="output"in e?e.output:e,a="input"in t?t.input:t;return n.connect(a),t}),()=>{t.reduce((e,t)=>{let n="output"in e?e.output:e,a="input"in t?t.input:t;return n.disconnect(a),t})}}function Q(e){return void 0===e?void 0:"number"==typeof e?e:function(e){let t=/^([a-gA-G]?)(#{1,}|b{1,}|)(-?\d+)$/.exec(e);if(!t)return;let n=t[1].toUpperCase();if(!n)return;let a=t[2],s="b"===a[0]?-a.length:a.length,i=t[3]?+t[3]:4,l=(n.charCodeAt(0)+3)%7;return[0,2,4,5,7,9,11][l]+s+12*(i+1)}(e)}function Y(e){return e*e/16129}function ee(e){let t=e,n=new Set;return{subscribe:function(e){return n.add(e),e(t),()=>{n.delete(e)}},set:function(e){t=e,n.forEach(e=>e(t))},get:function(){return t}}}function et(){let e=new Set;return{subscribe:function(t){return e.add(t),()=>{e.delete(t)}},trigger:function(t){e.forEach(e=>e(t))}}}var en=class{constructor(e,t){var n,a;this.context=e,H(this,c,void 0),H(this,d,void 0),H(this,p,void 0),H(this,h,void 0),H(this,f,void 0),H(this,m,void 0),X(this,m,Object.freeze(V({destination:e.destination,volume:100,volumeToGain:Y},t))),this.input=new GainNode(this.context),X(this,c,new GainNode(this.context)),X(this,h,J([this.input,L(this,c),L(this,m).destination]));let s=ee(null!=(n=t.volume)?n:100);this.setVolume=s.set;let i=null!=(a=t.volumeToGain)?a:Y;X(this,f,s.subscribe(e=>{L(this,c).gain.value=i(e)}))}addInsert(e){null!=L(this,p)||X(this,p,[]),L(this,p).push(e),L(this,h).call(this),X(this,h,J([this.input,...L(this,p),L(this,c),L(this,m).destination]))}addEffect(e,t,n){let a=new GainNode(this.context);a.gain.value=n;let s="input"in t?t.input:t,i=J([L(this,c),a,s]);null!=L(this,d)||X(this,d,[]),L(this,d).push({name:e,mix:a,disconnect:i})}sendEffect(e,t){var n;let a=null==(n=L(this,d))?void 0:n.find(t=>t.name===e);a?a.mix.gain.value=t:console.warn("Send bus not found: "+e)}disconnect(){var e;L(this,h).call(this),L(this,f).call(this),null==(e=L(this,d))||e.forEach(e=>e.disconnect()),X(this,d,void 0)}};function ea(e){var t,n,a,s;let i;let l=e.destination.context,r=l.createBufferSource();r.buffer=e.buffer,r.detune.value=null!=(t=null==e?void 0:e.detune)?t:0;let o=e.lpfCutoffHz?new BiquadFilterNode(l,{type:"lowpass",frequency:e.lpfCutoffHz}):void 0,u=l.createGain();u.gain.value=null!=(n=null==e?void 0:e.gain)?n:1;let[c,d]=function(e,t=.2){let n=0,a=new GainNode(e,{gain:1});return[a,function(s){if(n)return n;a.gain.cancelScheduledValues(s);let i=s||e.currentTime;return n=i+t,a.gain.setValueAtTime(1,i),a.gain.linearRampToValueAtTime(0,n),n}]}(l,e.decayTime),p=(s=[J([r,o,u,c,e.destination]),null==(a=e.stop)?void 0:a.call(e,t=>{(void 0===t||void 0===t.stopId||t.stopId===e.stopId)&&f(null==t?void 0:t.time)})],i=!1,()=>{i||(i=!0,s.forEach(e=>null==e?void 0:e()))});r.onended=()=>{var t;p(),null==(t=e.onEnded)||t.call(e)};let h=e.time||l.currentTime;function f(e){if(null!=e||(e=l.currentTime),e<=h)r.stop(e);else{let t=d(e);r.stop(t)}}return r.start(h),void 0!==e.duration&&f(h+e.duration),f}c=new WeakMap,d=new WeakMap,p=new WeakMap,h=new WeakMap,f=new WeakMap,m=new WeakMap;var es=class{constructor(e,t){var n,a,s,i,l,r;this.context=e,H(this,v,void 0),H(this,y,void 0),H(this,b,void 0),H(this,P,void 0),X(this,v,{destination:null!=(n=t.destination)?n:e.destination,detune:0,volume:null!=(a=t.volume)?a:100,velocity:null!=(s=t.velocity)?s:100,buffers:null!=(i=t.buffers)?i:{},volumeToGain:null!=(l=t.volumeToGain)?l:Y,noteToSample:null!=(r=t.noteToSample)?r:e=>[e.note.toString(),0]}),this.buffers={},X(this,y,et());let o="function"==typeof L(this,v).buffers?L(this,v).buffers:function(e){return(t,n)=>q(this,null,function*(){yield Promise.all([Object.keys(e).map(a=>q(this,null,function*(){let s=e[a];if(s instanceof AudioBuffer)n[a]=s;else if("string"==typeof s){let e=yield Z(t,s);e&&(n[a]=e)}}))])})}(L(this,v).buffers);X(this,b,o(e,this.buffers)),X(this,P,new en(e,L(this,v))),this.output=L(this,P)}loaded(){return q(this,null,function*(){return yield L(this,b),this})}start(e){var t,n,a;let s="object"==typeof e?e:{note:e},[i,l]=L(this,v).noteToSample(s,this.buffers,L(this,v)),r=this.buffers[i];if(!r)return console.warn(`Sample not found: '${i}'`),()=>void 0;let o=s.onEnded;return ea({buffer:r,destination:L(this,P).input,time:s.time,duration:s.duration,decayTime:s.decayTime,lpfCutoffHz:s.lpfCutoffHz,detune:l+(null!=(t=s.detune)?t:L(this,v).detune),gain:L(this,v).volumeToGain(null!=(n=s.velocity)?n:L(this,v).velocity),stop:L(this,y).subscribe,stopId:null!=(a=s.stopId)?a:s.note,onEnded:o?()=>o(e):void 0})}stop(e){L(this,y).trigger("object"==typeof e?e:{stopId:e})}};v=new WeakMap,y=new WeakMap,b=new WeakMap,P=new WeakMap;var ei={baseUrl:"",name:"",samples:[],sampleNames:[],nameToSample:{},sampleNameVariations:{}};function el(){return Object.keys(er)}var er={"TR-808":"https://danigb.github.io/samples/drum-machines/TR-808/dm.json","Casio-RZ1":"https://danigb.github.io/samples/drum-machines/Casio-RZ1/dm.json","LM-2":"https://danigb.github.io/samples/drum-machines/LM-2/dm.json","MFB-512":"https://danigb.github.io/samples/drum-machines/MFB-512/dm.json","Roland CR-8000":"https://danigb.github.io/samples/drum-machines/Roland-CR-8000/dm.json"},eo=class extends es{constructor(e,t){var n;let a=er[null!=(n=t.instrument)?n:"TR-808"];if(!a)throw Error("Invalid instrument: "+t.instrument);let s=function(e){return q(this,null,function*(){var t,n;let a=yield fetch(e),s=yield a.json();for(let a of(s.baseUrl=e.replace("/dm.json",""),s.sampleNames=[],s.nameToSample={},s.sampleNameVariations={},s.samples)){let e=-1!==a.indexOf("/")?a:a.replace("-","/");s.nameToSample[e]=e;let[i,l]=e.split("/");s.sampleNames.includes(i)||s.sampleNames.push(i),null!=(t=s.nameToSample)[i]||(t[i]=e),null!=(n=s.sampleNameVariations)[i]||(n[i]=[]),l&&s.sampleNameVariations[i].push(`${i}/${l}`)}return s})}(a);super(e,$(V({},t),{buffers:function(e){var t;let n=null!=(t=K(["ogg","m4a"]))?t:"ogg";return(t,a)=>q(this,null,function*(){let s=yield e;yield Promise.all(s.samples.map(e=>q(this,null,function*(){let i=`${s.baseUrl}/${e}.${n}`,l=-1!==e.indexOf("/")?e:e.replace("-","/"),r=yield Z(t,i);r&&(a[l]=r)})))})}(s),noteToSample:(e,t,n)=>{let a=L(this,g).nameToSample[e.note];return[null!=a?a:"",0]}})),H(this,g,ei),s.then(e=>{X(this,g,e)})}get sampleNames(){return L(this,g).sampleNames}getVariations(e){var t;return null!=(t=L(this,g).sampleNameVariations[e])?t:[]}};function eu(e){return q(this,null,function*(){try{let t=yield fetch(e),n=yield t.json();return n}catch(t){throw console.warn(`Can't load SFZ file ${e}`,t),Error(`Can't load SFZ file ${e}`)}})}function ec(e,t,n){return(void 0===t||void 0!==e&&e>=t)&&(void 0===n||void 0!==e&&e<=n)}g=new WeakMap;var ed=Object.freeze({meta:{},global:{},groups:[]}),ep=class{constructor(e,t){var n,a,s;this.context=e,H(this,x,void 0),H(this,_,void 0),H(this,M,void 0),H(this,j,void 0),H(this,D,void 0),X(this,_,{instrument:t.instrument,destination:null!=(n=t.destination)?n:e.destination,detune:0,volume:null!=(a=t.volume)?a:100,velocity:null!=(s=t.velocity)?s:100,decayTime:.3}),this.buffers={},X(this,M,et()),X(this,x,ed),X(this,j,(function(e){return q(this,null,function*(){if("string"==typeof e)return eu(e);if("global"in e)return e;if("websfzUrl"in e){let t=yield eu(e.websfzUrl);return null!=t.meta||(t.meta={}),e.name&&(t.meta.name=e.name),e.baseUrl&&(t.meta.baseUrl=e.baseUrl),e.formats&&(t.meta.formats=e.formats),t}throw Error("Invalid instrument: "+JSON.stringify(e))})})(t.instrument).then(t=>(X(this,x,Object.freeze(t)),function(e,t,n){return q(this,null,function*(){n.groups.forEach(a=>{let s=function(e,t){var n,a,s,i;let l={},r=null!=(n=e.meta.baseUrl)?n:"",o=null!=(s=K(null!=(a=e.meta.formats)?a:[]))?s:"ogg",u=null!=(i=e.global.default_path)?i:"";return t?t.regions.reduce((e,t)=>(t.sample&&(e[t.sample]=`${r}/${u}${t.sample}.${o}`),e),l):l}(n,a);return function(e,t,n){return q(this,null,function*(){yield Promise.all(Object.keys(n).map(a=>q(this,null,function*(){if(t[a])return;let s=yield Z(e,n[a]);return s&&(t[a]=s),t})))})}(e,t,s)})})}(e,this.buffers,L(this,x))))),X(this,D,new en(e,L(this,_))),this.output=L(this,D)}loaded(){return q(this,null,function*(){return yield L(this,j),this})}start(e){var t;let n="object"==typeof e?e:{note:e},a=Q(n.note);if(void 0===a)return()=>void 0;let s=null!=(t=n.velocity)?t:L(this,_).velocity,i=function(e,t){let n=[];for(let a of e.groups)if(ec(t.midi,a.lokey,a.hikey)&&ec(t.velocity,a.lovel,a.hivel)&&ec(t.cc64,a.locc64,a.hicc64))for(let e of a.regions)ec(t.midi,e.lokey,e.hikey)&&ec(t.velocity,e.lovel,e.hivel)&&ec(t.cc64,a.locc64,a.hicc64)&&n.push([a,e]);return n}(L(this,x),{midi:a,velocity:s}),l=i.map(([t,s])=>{var i,l,r,o,u,c;let d=null!=(l=null!=(i=s.pitch_keycenter)?i:s.key)?l:a,p=this.output.input,h=this.buffers[s.sample];if(!h)return console.warn(`Sample not found: ${s.sample}`),()=>void 0;let f=n.onEnded;return ea({buffer:h,destination:p,decayTime:null!=(r=n.decayTime)?r:L(this,_).decayTime,detune:(a-d)*100+(null!=(o=n.detune)?o:L(this,_).detune),gain:Y(null!=(u=n.velocity)?u:L(this,_).velocity),time:n.time,duration:n.duration,stop:L(this,M).subscribe,stopId:null!=(c=n.stopId)?c:n.note,onEnded:f?()=>f(e):void 0})});return e=>l.forEach(t=>t(e))}stop(e){L(this,M).trigger("object"==typeof e?e:{stopId:e})}disconnect(){this.stop(),L(this,D).disconnect()}};x=new WeakMap,_=new WeakMap,M=new WeakMap,j=new WeakMap,D=new WeakMap;var eh={CP80:"https://danigb.github.io/samples/gs-e-pianos/CP80/cp80.websfz.json",PianetT:"https://danigb.github.io/samples/gs-e-pianos/Pianet T/pianet-t.websfz.json",WurlitzerEP200:"https://danigb.github.io/samples/gs-e-pianos/Wurlitzer EP200/wurlitzer-ep200.websfz.json",TX81Z:"https://danigb.github.io/samples/vcsl/TX81Z/tx81z-fm-piano.websfz.json"},ef=class extends ep{constructor(e,t){var n;super(e,$(V({},t),{instrument:null!=(n=eh[t.instrument])?n:t.instrument}));let a=ee(0);this.tremolo={level:e=>a.set(Y(e))};let s=function(e,t){let n=new GainNode(e),a=new GainNode(e);n.channelCount=2,n.channelCountMode="explicit";let s=new ChannelSplitterNode(e,{numberOfOutputs:2}),i=new GainNode(e),l=new GainNode(e),r=new ChannelMergerNode(e,{numberOfInputs:2}),o=new OscillatorNode(e,{type:"sine",frequency:1});o.start();let u=new GainNode(e),c=new OscillatorNode(e,{type:"sine",frequency:1.1});c.start();let d=new GainNode(e);n.connect(s),s.connect(i,0),s.connect(l,1),i.connect(r,0,0),l.connect(r,0,1),o.connect(u),u.connect(i.gain),c.connect(d),d.connect(l.gain),r.connect(a);let p=t(e=>{u.gain.value=e,d.gain.value=e});return n.disconnect=()=>{p(),o.stop(),c.stop(),n.disconnect(s),s.disconnect(i,0),s.disconnect(l,1),i.disconnect(r,0,0),l.disconnect(r,0,1),o.disconnect(i),c.disconnect(l),r.disconnect(a)},{input:n,output:a}}(e,a.subscribe);this.output.addInsert(s)}},em=class extends ep{constructor(e,t){let n=function(e){if(!eb[e])throw Error(`Mallet instrument "${e}" not valid`);return{name:e,websfzUrl:ev+eb[e]+ey}}(t.instrument);super(e,$(V({},t),{instrument:n}))}},ev="https://danigb.github.io/samples/vcsl/",ey=".websfz.json",eb={"Balafon - Hard Mallet":"Struck Idiophones/balafon-hard-mallet","Balafon - Keyswitch":"Struck Idiophones/balafon-keyswitch","Balafon - Soft Mallet":"Struck Idiophones/balafon-soft-mallet","Balafon - Traditional Mallet":"Struck Idiophones/balafon-traditional-mallet","Tubular Bells 1":"Struck Idiophones/tubular-bells-1","Tubular Bells 2":"Struck Idiophones/tubular-bells-2","Vibraphone - Hard Mallets":"Struck Idiophones/vibraphone-hard-mallets","Vibraphone - Keyswitch":"Struck Idiophones/vibraphone-keyswitch","Vibraphone - Soft Mallets":"Struck Idiophones/vibraphone-soft-mallets","Xylophone - Hard Mallets":"Struck Idiophones/xylophone-hard-mallets","Xylophone - Keyswitch":"Struck Idiophones/xylophone-keyswitch","Xylophone - Medium Mallets":"Struck Idiophones/xylophone-medium-mallets","Xylophone - Soft Mallets":"Struck Idiophones/xylophone-soft-mallets"},eP=["preDelay","bandwidth","inputDiffusion1","inputDiffusion2","decay","decayDiffusion1","decayDiffusion2","damping","excursionRate","excursionDepth","wet","dry"],eg=new WeakMap,ex=class{constructor(e){H(this,w,void 0),H(this,F,void 0),H(this,N,void 0),this.input=e.createGain(),X(this,N,e.destination),X(this,F,(function(e){return q(this,null,function*(){let t=eg.get(e);if(!t){let n=new Blob(['"use strict";(()=>{var f=class extends AudioWorkletProcessor{_pDLength;_preDelay;_pDWrite;_lp1;_lp2;_lp3;_excPhase;_taps;_Delays;sampleRate;static get parameterDescriptors(){return[["preDelay",0,0,sampleRate-1,"k-rate"],["bandwidth",.9999,0,1,"k-rate"],["inputDiffusion1",.75,0,1,"k-rate"],["inputDiffusion2",.625,0,1,"k-rate"],["decay",.5,0,1,"k-rate"],["decayDiffusion1",.7,0,.999999,"k-rate"],["decayDiffusion2",.5,0,.999999,"k-rate"],["damping",.005,0,1,"k-rate"],["excursionRate",.5,0,2,"k-rate"],["excursionDepth",.7,0,2,"k-rate"],["wet",1,0,1,"k-rate"],["dry",0,0,1,"k-rate"]].map(e=>new Object({name:e[0],defaultValue:e[1],minValue:e[2],maxValue:e[3],automationRate:e[4]}))}constructor(e){super(),this.sampleRate=sampleRate,this._Delays=[],this._pDLength=sampleRate+(128-sampleRate%128),this._preDelay=new Float32Array(this._pDLength),this._pDWrite=0,this._lp1=0,this._lp2=0,this._lp3=0,this._excPhase=0,[.004771345,.003595309,.012734787,.009307483,.022579886,.149625349,.060481839,.1249958,.030509727,.141695508,.089244313,.106280031].forEach(a=>this.makeDelay(a,sampleRate)),this._taps=Int16Array.from([.008937872,.099929438,.064278754,.067067639,.066866033,.006283391,.035818689,.011861161,.121870905,.041262054,.08981553,.070931756,.011256342,.004065724],a=>Math.round(a*sampleRate))}makeDelay(e,a){let t=Math.round(e*a),s=2**Math.ceil(Math.log2(t));this._Delays.push([new Float32Array(s),t-1,0,s-1])}writeDelay(e,a){return this._Delays[e][0][this._Delays[e][1]]=a}readDelay(e){return this._Delays[e][0][this._Delays[e][2]]}readDelayAt(e,a){let t=this._Delays[e];return t[0][t[2]+a&t[3]]}readDelayCAt(e,a){let t=this._Delays[e],s=a-~~a,d=~~a+t[2]-1,r=t[3],D=t[0][d++&r],l=t[0][d++&r],h=t[0][d++&r],y=t[0][d&r],u=(3*(l-h)-D+y)/2,m=2*h+D-(5*l+y)/2,c=(h-D)/2;return((u*s+m)*s+c)*s+l}process(e,a,t){let s=~~t.preDelay[0],d=t.bandwidth[0],r=t.inputDiffusion1[0],D=t.inputDiffusion2[0],l=t.decay[0],h=t.decayDiffusion1[0],y=t.decayDiffusion2[0],u=1-t.damping[0],m=t.excursionRate[0]/sampleRate,c=t.excursionDepth[0]*sampleRate/1e3,w=t.wet[0]*.6,A=t.dry[0];if(e[0].length==2)for(let i=127;i>=0;i--)this._preDelay[this._pDWrite+i]=(e[0][0][i]+e[0][1][i])*.5,a[0][0][i]=e[0][0][i]*A,a[0][1][i]=e[0][1][i]*A;else if(e[0].length>0){this._preDelay.set(e[0][0],this._pDWrite);for(let i=127;i>=0;i--)a[0][0][i]=a[0][1][i]=e[0][0][i]*A}else this._preDelay.set(new Float32Array(128),this._pDWrite);let o=0;for(;o<128;){let i=0,b=0;this._lp1+=d*(this._preDelay[(this._pDLength+this._pDWrite-s+o)%this._pDLength]-this._lp1);let p=this.writeDelay(0,this._lp1-r*this.readDelay(0));p=this.writeDelay(1,r*(p-this.readDelay(1))+this.readDelay(0)),p=this.writeDelay(2,r*p+this.readDelay(1)-D*this.readDelay(2)),p=this.writeDelay(3,D*(p-this.readDelay(3))+this.readDelay(2));let k=D*p+this.readDelay(3),g=c*(1+Math.cos(this._excPhase*6.28)),x=c*(1+Math.sin(this._excPhase*6.2847)),_=this.writeDelay(4,k+l*this.readDelay(11)+h*this.readDelayCAt(4,g));this.writeDelay(5,this.readDelayCAt(4,g)-h*_),this._lp2+=u*(this.readDelay(5)-this._lp2),_=this.writeDelay(6,l*this._lp2-y*this.readDelay(6)),this.writeDelay(7,this.readDelay(6)+y*_),_=this.writeDelay(8,k+l*this.readDelay(7)+h*this.readDelayCAt(8,x)),this.writeDelay(9,this.readDelayCAt(8,x)-h*_),this._lp3+=u*(this.readDelay(9)-this._lp3),_=this.writeDelay(10,l*this._lp3-y*this.readDelay(10)),this.writeDelay(11,this.readDelay(10)+y*_),i=this.readDelayAt(9,this._taps[0])+this.readDelayAt(9,this._taps[1])-this.readDelayAt(10,this._taps[2])+this.readDelayAt(11,this._taps[3])-this.readDelayAt(5,this._taps[4])-this.readDelayAt(6,this._taps[5])-this.readDelayAt(7,this._taps[6]),b=this.readDelayAt(5,this._taps[7])+this.readDelayAt(5,this._taps[8])-this.readDelayAt(6,this._taps[9])+this.readDelayAt(7,this._taps[10])-this.readDelayAt(9,this._taps[11])-this.readDelayAt(10,this._taps[12])-this.readDelayAt(11,this._taps[13]),a[0][0][o]+=i*w,a[0][1][o]+=b*w,this._excPhase+=m,o++;for(let R=0,n=this._Delays[0];R<this._Delays.length;n=this._Delays[++R])n[1]=n[1]+1&n[3],n[2]=n[2]+1&n[3]}return this._pDWrite=(this._pDWrite+128)%this._pDLength,!0}};registerProcessor("DattorroReverb",f);})();'],{type:"application/javascript"}),a=URL.createObjectURL(n);t=e.audioWorklet.addModule(a),eg.set(e,t)}yield t;let n=new AudioWorkletNode(e,"DattorroReverb",{outputChannelCount:[2]});return n})})(e).then(e=>(this.input.connect(e),e.connect(L(this,N)),X(this,w,e),this)))}get paramNames(){return eP}getParam(e){var t;return null==(t=L(this,w))?void 0:t.parameters.get("preDelay")}get isReady(){return void 0!==L(this,w)}ready(){return L(this,F)}connect(e){L(this,w)&&(L(this,w).disconnect(L(this,N)),L(this,w).connect(e)),X(this,N,e)}};w=new WeakMap,F=new WeakMap,N=new WeakMap;var e_=class extends es{constructor(e,t){var n,a,s;let i=t.instrument.startsWith("http")?t.instrument:function(e,t){var n;let a=null!=(n=K(["ogg","mp3"]))?n:"mp3";return`https://gleitz.github.io/midi-js-soundfonts/${t}/${e}-${a}.js`}(t.instrument,null!=(n=t.kit)?n:"MusyngKite");super(e,{destination:t.destination,detune:t.detune,volume:t.volume,velocity:t.velocity,decayTime:null!=(a=t.decayTime)?a:.5,lpfCutoffHz:t.lpfCutoffHz,buffers:function(e){return(t,n)=>q(this,null,function*(){let a=yield(yield fetch(e)).text(),s=function(e){let t=e.indexOf("MIDI.Soundfont.");if(t<0)throw Error("Invalid MIDI.js Soundfont format");let n=e.indexOf("=",t)+2,a=e.lastIndexOf(",");return JSON.parse(e.slice(n,a)+"}")}(a),i=Object.keys(s);yield Promise.all(i.map(e=>q(this,null,function*(){var a;let i=Q(e);if(!i)return;let l=function(e){let t=window.atob(e),n=t.length,a=new Uint8Array(n);for(let e=0;e<n;e++)a[e]=t.charCodeAt(e);return a.buffer}((a=s[e]).slice(a.indexOf(",")+1)),r=yield t.decodeAudioData(l);n[i]=r})))})}(i),noteToSample:(e,t,n)=>{let a=Q(e.note);return void 0===a?["",0]:function(e,t){let n=0;for(;void 0===t[e+n]&&n<128;)n=n>0?-n:-n+1;return 127===n?[e,0]:[e+n,-(100*n)]}(a,t)}});let l=null!=(s=t.extraGain)?s:5,r=new GainNode(e,{gain:l});this.output.addInsert(r)}};function eM(){return["MusyngKite","FluidR3_GM"]}var ej=class extends es{constructor(e,t){var n,a;super(e,{destination:t.destination,detune:t.detune,volume:t.volume,velocity:t.velocity,decayTime:null!=(n=t.decayTime)?n:.5,lpfCutoffHz:t.lpfCutoffHz,buffers:function(e){var t;let n=null!=(t=K(["ogg","m4a"]))?t:"ogg";return(t,a)=>q(this,null,function*(){for(let s of eD)yield Promise.all(s.samples.map(i=>q(this,[i],function*([i,l]){let r=`${e}/${l}.${n}`,o=yield Z(t,r);o&&(a[s.name+i]=o)})))})}(null!=(a=t.baseUrl)?a:"https://danigb.github.io/samples/splendid-grand-piano"),noteToSample:(e,t,n)=>{var a;let s=Q(e.note);if(!s)return[e.note,0];let i=null!=(a=e.velocity)?a:n.velocity,l=eD.findIndex(e=>i>=e.vel_range[0]&&i<=e.vel_range[1]),r=eD[l];return r?function(e,t,n){let a=0;for(;void 0===n[e+(t+a)]&&a<128;)a=a>0?-a:-a+1;return 127===a?[e+t,0]:[e+(t+a),-(100*a)]}(r.name,s,t):["",0]}})}},eD=[{name:"PPP",vel_range:[1,40],cutoff:1e3,samples:[[23,"PP-B-1"],[27,"PP-D#0"],[29,"PP-F0"],[31,"PP-G0"],[33,"PP-A0"],[35,"PP-B0"],[37,"PP-C#1"],[38,"PP-D1"],[40,"PP-E1"],[41,"PP-F1"],[43,"PP-G1"],[45,"PP-A1"],[47,"PP-B1"],[48,"PP-C2"],[50,"PP-D2"],[52,"PP-E2"],[53,"PP-F2"],[55,"PP-G2"],[56,"PP-G#2"],[57,"PP-A2"],[58,"PP-A#2"],[59,"PP-B2"],[60,"PP-C3"],[62,"PP-D3"],[64,"PP-E3"],[65,"PP-F3"],[67,"PP-G3"],[69,"PP-A3"],[71,"PP-B3"],[72,"PP-C4"],[74,"PP-D4"],[76,"PP-E4"],[77,"PP-F4"],[79,"PP-G4"],[80,"PP-G#4"],[81,"PP-A4"],[82,"PP-A#4"],[83,"PP-B4"],[85,"PP-C#5"],[86,"PP-D5"],[87,"PP-D#5"],[89,"PP-F5"],[90,"PP-F#5"],[91,"PP-G5"],[92,"PP-G#5"],[93,"PP-A5"],[94,"PP-A#5"],[95,"PP-B5"],[96,"PP-C6"],[97,"PP-C#6"],[98,"PP-D6"],[99,"PP-D#6"],[100,"PP-E6"],[101,"PP-F6"],[102,"PP-F#6"],[103,"PP-G6"],[104,"PP-G#6"],[105,"PP-A6"],[106,"PP-A#6"],[107,"PP-B6"],[108,"PP-C7"]]},{name:"PP",vel_range:[41,67],samples:[[23,"PP-B-1"],[27,"PP-D#0"],[29,"PP-F0"],[31,"PP-G0"],[33,"PP-A0"],[35,"PP-B0"],[37,"PP-C#1"],[38,"PP-D1"],[40,"PP-E1"],[41,"PP-F1"],[43,"PP-G1"],[45,"PP-A1"],[47,"PP-B1"],[48,"PP-C2"],[50,"PP-D2"],[52,"PP-E2"],[53,"PP-F2"],[55,"PP-G2"],[56,"PP-G#2"],[57,"PP-A2"],[58,"PP-A#2"],[59,"PP-B2"],[60,"PP-C3"],[62,"PP-D3"],[64,"PP-E3"],[65,"PP-F3"],[67,"PP-G3"],[69,"PP-A3"],[71,"PP-B3"],[72,"PP-C4"],[74,"PP-D4"],[76,"PP-E4"],[77,"PP-F4"],[79,"PP-G4"],[80,"PP-G#4"],[81,"PP-A4"],[82,"PP-A#4"],[83,"PP-B4"],[85,"PP-C#5"],[86,"PP-D5"],[87,"PP-D#5"],[89,"PP-F5"],[90,"PP-F#5"],[91,"PP-G5"],[92,"PP-G#5"],[93,"PP-A5"],[94,"PP-A#5"],[95,"PP-B5"],[96,"PP-C6"],[97,"PP-C#6"],[98,"PP-D6"],[99,"PP-D#6"],[100,"PP-E6"],[101,"PP-F6"],[102,"PP-F#6"],[103,"PP-G6"],[104,"PP-G#6"],[105,"PP-A6"],[106,"PP-A#6"],[107,"PP-B6"],[108,"PP-C7"]]},{name:"MP",vel_range:[68,84],samples:[[23,"Mp-B-1"],[27,"Mp-D#0"],[29,"Mp-F0"],[31,"Mp-G0"],[33,"Mp-A0"],[35,"Mp-B0"],[37,"Mp-C#1"],[38,"Mp-D1"],[40,"Mp-E1"],[41,"Mp-F1"],[43,"Mp-G1"],[45,"Mp-A1"],[47,"Mp-B1"],[48,"Mp-C2"],[50,"Mp-D2"],[52,"Mp-E2"],[53,"Mp-F2"],[55,"Mp-G2"],[56,"Mp-G#2"],[57,"Mp-A2"],[58,"Mp-A#2"],[59,"Mp-B2"],[60,"Mp-C3"],[62,"Mp-D3"],[64,"Mp-E3"],[65,"Mp-F3"],[67,"Mp-G3"],[69,"Mp-A3"],[71,"Mp-B3"],[72,"Mp-C4"],[74,"Mp-D4"],[76,"Mp-E4"],[77,"Mp-F4"],[79,"Mp-G4"],[80,"Mp-G#4"],[81,"Mp-A4"],[82,"Mp-A#4"],[83,"Mp-B4"],[85,"Mp-C#5"],[86,"Mp-D5"],[87,"Mp-D#5"],[88,"Mp-E5"],[89,"Mp-F5"],[90,"Mp-F#5"],[91,"Mp-G5"],[92,"Mp-G#5"],[93,"Mp-A5"],[94,"Mp-A#5"],[95,"Mp-B5"],[96,"Mp-C6"],[97,"Mp-C#6"],[98,"Mp-D6"],[99,"Mp-D#6"],[100,"PP-E6"],[101,"Mp-F6"],[102,"Mp-F#6"],[103,"Mp-G6"],[104,"Mp-G#6"],[105,"Mp-A6"],[106,"Mp-A#6"],[107,"PP-B6"],[108,"PP-C7"]]},{name:"MF",vel_range:[85,100],samples:[[23,"Mf-B-1"],[27,"Mf-D#0"],[29,"Mf-F0"],[31,"Mf-G0"],[33,"Mf-A0"],[35,"Mf-B0"],[37,"Mf-C#1"],[38,"Mf-D1"],[40,"Mf-E1"],[41,"Mf-F1"],[43,"Mf-G1"],[45,"Mf-A1"],[47,"Mf-B1"],[48,"Mf-C2"],[50,"Mf-D2"],[52,"Mf-E2"],[53,"Mf-F2"],[55,"Mf-G2"],[56,"Mf-G#2"],[57,"Mf-A2"],[58,"Mf-A#2"],[59,"Mf-B2"],[60,"Mf-C3"],[62,"Mf-D3"],[64,"Mf-E3"],[65,"Mf-F3"],[67,"Mf-G3"],[69,"Mf-A3"],[71,"Mf-B3"],[72,"Mf-C4"],[74,"Mf-D4"],[76,"Mf-E4"],[77,"Mf-F4"],[79,"Mf-G4"],[80,"Mf-G#4"],[81,"Mf-A4"],[82,"Mf-A#4"],[83,"Mf-B4"],[85,"Mf-C#5"],[86,"Mf-D5"],[87,"Mf-D#5"],[88,"Mf-E5"],[89,"Mf-F5"],[90,"Mf-F#5"],[91,"Mf-G5"],[92,"Mf-G#5"],[93,"Mf-A5"],[94,"Mf-A#5"],[95,"Mf-B5"],[96,"Mf-C6"],[97,"Mf-C#6"],[98,"Mf-D6"],[99,"Mf-D#6"],[100,"Mf-E6"],[101,"Mf-F6"],[102,"Mf-F#6"],[103,"Mf-G6"],[104,"Mf-G#6"],[105,"Mf-A6"],[106,"Mf-A#6"],[107,"Mf-B6"],[108,"PP-C7"]]},{name:"FF",vel_range:[101,127],samples:[[23,"FF-B-1"],[27,"FF-D#0"],[29,"FF-F0"],[31,"FF-G0"],[33,"FF-A0"],[35,"FF-B0"],[37,"FF-C#1"],[38,"FF-D1"],[40,"FF-E1"],[41,"FF-F1"],[43,"FF-G1"],[45,"FF-A1"],[47,"FF-B1"],[48,"FF-C2"],[50,"FF-D2"],[52,"FF-E2"],[53,"FF-F2"],[55,"FF-G2"],[56,"FF-G#2"],[57,"FF-A2"],[58,"FF-A#2"],[59,"FF-B2"],[60,"FF-C3"],[62,"FF-D3"],[64,"FF-E3"],[65,"FF-F3"],[67,"FF-G3"],[69,"FF-A3"],[71,"FF-B3"],[72,"FF-C4"],[74,"FF-D4"],[76,"FF-E4"],[77,"FF-F4"],[79,"FF-G4"],[80,"FF-G#4"],[81,"FF-A4"],[82,"FF-A#4"],[83,"FF-B4"],[85,"FF-C#5"],[86,"FF-D5"],[88,"FF-E5"],[89,"FF-F5"],[91,"FF-G5"],[93,"FF-A5"],[95,"Mf-B5"],[96,"Mf-C6"],[97,"Mf-C#6"],[98,"Mf-D6"],[99,"Mf-D#6"],[100,"Mf-E6"],[102,"Mf-F#6"],[103,"Mf-G6"],[104,"Mf-G#6"],[105,"Mf-A6"],[106,"Mf-A#6"],[107,"Mf-B6"],[108,"Mf-C7"]]}];function ew(){return(0,E.useState)("init")}function eF(e){let{status:t,onClick:n}=e;return"init"===t?(0,C.jsx)("button",{className:"text-rose-700 bg-zinc-900 px-2 rounded",onClick:n,children:"Load"}):"ready"===t?(0,C.jsx)("div",{className:"text-teal-600",children:"Ready"}):"loading"===t?(0,C.jsx)("div",{className:"text-gray-500",children:"Loading..."}):(0,C.jsx)("div",{className:"text-red-700",children:"Error loading"})}function eN(e){let{className:t}=e,[n,i]=ew(),[l,r]=(0,E.useState)(el()[0]),[o,u]=(0,E.useState)(void 0),[c,d]=(0,E.useState)(0),[p,h]=(0,E.useState)(100);function f(e){i("loading"),null!=a||(a=new window.AudioContext),null!=s||(s=new ex(a));let t=new eo(a,{instrument:e});t.output.addEffect("reverb",s,c),t.loaded().then(()=>{i("ready"),u(t)}).catch(e=>{i("error"),console.log("Instrument error",e)})}return(0,C.jsxs)("div",{className:t,children:[(0,C.jsxs)("div",{className:"flex gap-2 items-end mb-2",children:[(0,C.jsx)("h1",{className:"text-3xl",children:"DrumMachine"}),(0,C.jsx)(eF,{status:n,onClick:()=>{f(l)}})]}),(0,C.jsxs)("div",{className:"ready"!==n?"opacity-30 no-select":"no-select",children:[(0,C.jsxs)("div",{className:"flex gap-4 mb-2",children:[(0,C.jsx)("select",{className:"appearance-none bg-zinc-700 text-zinc-200 rounded border border-gray-400 py-2 px-3 leading-tight focus:outline-none focus:border-blue-500",value:l,onChange:e=>{let t=e.target.value;t!==l&&(r(t),f(t))},children:el().map(e=>(0,C.jsx)("option",{value:e,children:e},e))}),(0,C.jsx)("div",{children:"Vol:"}),(0,C.jsx)("input",{type:"range",min:0,max:127,step:1,value:p,onChange:e=>{let t=e.target.valueAsNumber;null==o||o.output.setVolume(t),h(t)}}),(0,C.jsx)("div",{children:"Reverb:"}),(0,C.jsx)("input",{type:"range",min:0,max:1,step:.001,value:c,onChange:e=>{let t=e.target.valueAsNumber;null==o||o.output.sendEffect("reverb",t),d(t)}})]}),(0,C.jsx)("div",{className:"grid grid-cols-6 gap-1",children:null==o?void 0:o.sampleNames.map(e=>(0,C.jsxs)("div",{className:"bg-zinc-900 rounded px-2 pb-2",children:[(0,C.jsx)("div",{className:"flex",children:(0,C.jsx)("button",{className:"text-left flex-grow",onClick:()=>{null==o||o.start({note:e,detune:50*(Math.random()-.5)})},children:e})}),(0,C.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:null==o?void 0:o.getVariations(e).map(e=>(0,C.jsx)("button",{className:"bg-zinc-600 w-4 h-4 rounded",onMouseDown:()=>{null==o||o.start({note:e})}},e))})]},e))})]})]})}function eC(){return null!=i||(i=new AudioContext),i}var eA=n(2209);function ek(e){let{instrument:t}=e,n=(0,E.useRef)(null),[a,s]=(0,E.useState)([]),[i,l]=(0,E.useState)(""),[r,o]=(0,E.useState)(),[u,c]=(0,E.useState)("");return(0,E.useEffect)(()=>{void 0!==window.navigator&&void 0!==navigator.requestMIDIAccess&&eA.u5.enable().then(()=>{let e=eA.u5.inputs.map(e=>e.name);s(e),l(e[0])})},[]),n.current=null!=t?t:null,(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("button",{className:"px-1 rounded "+(r?"bg-emerald-600":"bg-zinc-700"),onClick:()=>{if(r){o(void 0),r.forEach(e=>e.remove());return}let e=eA.u5.inputs.find(e=>e.name===i);if(!e)return;let t=e.addListener("noteon",e=>{var t;let a={note:e.note.number,velocity:e.rawVelocity};null===(t=n.current)||void 0===t||t.start(a),c("".concat(a.note," (").concat(a.velocity,")"))}),a=e.addListener("noteoff",e=>{var t;null===(t=n.current)||void 0===t||t.stop({stopId:e.note.number}),c("")});o([...Array.isArray(t)?t:[t],...Array.isArray(a)?a:[a]])},children:"MIDI"}),(0,C.jsx)("select",{className:"appearance-none bg-zinc-700 text-zinc-200 rounded border border-gray-400 py-2 px-3 leading-tight focus:outline-none focus:border-blue-500 py-[2px]",value:i,onChange:e=>{let t=e.target.value;l(t)},children:a.map(e=>(0,C.jsx)("option",{value:e,children:e},e))}),(0,C.jsx)("div",{className:"opacity-50",children:u})]})}var eS=n(5950);let eG=e=>[0,1,2,3,4,5,6,7,8,9,10,11].map(t=>t+e),eE=e=>[1,3,6,8,10].includes(e%12);function eT(e){let{className:t,borderColor:n="border-blue-700",onPress:a,onRelease:s}=e,[i,l]=(0,E.useState)(100),[r,o]=(0,E.useState)(60),[u,c]=(0,E.useState)(!1),d=e=>!1;return(0,C.jsxs)("div",{className:t,children:[(0,C.jsx)("div",{className:"piano-container border-t-8 ".concat(n),children:[...eG(r),...eG(r+12)].map(e=>eE(e)?(0,C.jsx)("div",{className:"accidental-key__wrapper",children:(0,C.jsx)("button",{className:"accidental-key ".concat(d(e)?"accidental-key--playing":""),onMouseDown:()=>a({note:e,velocity:i}),onMouseUp:()=>{!u&&s&&s(e)},children:(0,C.jsx)("div",{className:"text"})})},e):(0,C.jsx)("button",{className:"natural-key ".concat(d(e)?"natural-key--playing":""),onMouseDown:()=>a({note:e,velocity:i}),onMouseUp:()=>{!u&&s&&s(e)},children:(0,C.jsx)("div",{className:"text"})},e))}),(0,C.jsxs)("div",{className:"flex gap-1 items-center mt-1",children:[(0,C.jsxs)("div",{children:["Octave: ",r,"-",r+12+11]}),(0,C.jsx)("button",{className:"bg-zinc-900 px-1 rounded",onClick:()=>{o(r-12)},children:"-"}),(0,C.jsx)("button",{className:"bg-zinc-900 px-1 rounded",onClick:()=>{o(r+12)},children:"+"}),(0,C.jsxs)("div",{className:"ml-3",children:["Velocity: ",i]}),(0,C.jsx)("input",{type:"range",min:0,max:127,value:i,onChange:e=>l(e.target.valueAsNumber)}),(0,C.jsx)("input",{className:"ml-3",type:"checkbox",checked:u,onChange:e=>c(e.target.checked)}),(0,C.jsx)("div",{className:"",children:"Sustain"}),(0,C.jsx)("button",{className:"bg-zinc-900 px-1 rounded",onClick:()=>{let e=eS.Ci.degrees("C4 major"),t=eS.e6.numeric([1,8,1]).map(e).map(eS.jC.midi);t.map((e,t)=>a({note:null!=e?e:0,velocity:Math.floor(60+40*Math.random()),time:.25*t,duration:.05}))},children:"Test"})]})]})}let eB=Object.keys(eh);function ez(e){let{className:t}=e,[n,a]=(0,E.useState)(void 0),[s,i]=(0,E.useState)("CP80"),[r,o]=ew(),[u,c]=(0,E.useState)(0),[d,p]=(0,E.useState)(0),[h,f]=(0,E.useState)(100);function m(e){n&&n.disconnect(),o("loading");let t=eC();null!=l||(l=new ex(t));let s=new ef(t,{instrument:e,volume:h});s.output.addEffect("reverb",l,u),a(s),s.loaded().then(()=>{o("ready")})}return(0,C.jsxs)("div",{className:t,children:[(0,C.jsxs)("div",{className:"flex gap-2 items-end mb-2",children:[(0,C.jsx)("h1",{className:"text-3xl",children:"Electric Piano"}),(0,C.jsx)(eF,{status:r,onClick:()=>m(s)}),(0,C.jsx)(ek,{instrument:n})]}),(0,C.jsx)("div",{}),(0,C.jsxs)("div",{className:"ready"!==r?"opacity-30":"",children:[(0,C.jsxs)("div",{className:"flex gap-4 mb-2 no-select",children:[(0,C.jsx)("select",{className:"appearance-none bg-zinc-700 text-zinc-200 rounded border border-gray-400 py-2 px-3 leading-tight focus:outline-none focus:border-blue-500",value:s,onChange:e=>{let t=e.target.value;m(t),i(t)},children:eB.map(e=>(0,C.jsx)("option",{value:e,children:e},e))}),(0,C.jsx)("button",{className:"bg-zinc-700 rounded px-3 py-0.5 shadow",onClick:()=>{null==n||n.stop()},children:"Stop all"})]}),(0,C.jsxs)("div",{className:"flex gap-4 mb-2 no-select",children:[(0,C.jsx)("div",{children:"Volume:"}),(0,C.jsx)("input",{type:"range",min:0,max:127,step:1,value:h,onChange:e=>{let t=e.target.valueAsNumber;null==n||n.output.setVolume(t),f(t)}}),(0,C.jsx)("div",{children:"Tremolo:"}),(0,C.jsx)("input",{type:"range",min:0,max:127,step:1,value:d,onChange:e=>{let t=e.target.valueAsNumber;null==n||n.tremolo.level(t),p(t)}}),(0,C.jsx)("div",{children:"Reverb:"}),(0,C.jsx)("input",{type:"range",min:0,max:1,step:.001,value:u,onChange:e=>{let t=e.target.valueAsNumber;null==n||n.output.sendEffect("reverb",t),c(t)}})]}),(0,C.jsx)(eT,{borderColor:"border-rose-700",onPress:e=>{var t;n&&(e.time=(null!==(t=e.time)&&void 0!==t?t:0)+n.context.currentTime,n.start(e))},onRelease:e=>{null==n||n.stop({stopId:e})}})]})]})}let eI=Object.keys(eb);function eR(e){let{className:t}=e,[n,a]=(0,E.useState)(void 0),[s,i]=(0,E.useState)(eI[0]),[l,o]=ew(),[u,c]=(0,E.useState)(0),[d,p]=(0,E.useState)(100);function h(e){n&&n.disconnect(),o("loading");let t=eC();null!=r||(r=new ex(t));let s=new em(t,{instrument:e,volume:d});s.output.addEffect("reverb",r,u),a(s),s.loaded().then(()=>{o("ready")})}return(0,C.jsxs)("div",{className:t,children:[(0,C.jsxs)("div",{className:"flex gap-2 items-end mb-2",children:[(0,C.jsx)("h1",{className:"text-3xl",children:"Mallet"}),(0,C.jsx)(eF,{status:l,onClick:()=>h(s)}),(0,C.jsx)(ek,{instrument:n})]}),(0,C.jsx)("div",{}),(0,C.jsxs)("div",{className:"ready"!==l?"opacity-30":"",children:[(0,C.jsxs)("div",{className:"flex gap-4 mb-2 no-select",children:[(0,C.jsx)("select",{className:"appearance-none bg-zinc-700 text-zinc-200 rounded border border-gray-400 py-2 px-3 leading-tight focus:outline-none focus:border-blue-500",value:s,onChange:e=>{let t=e.target.value;h(t),i(t)},children:eI.map(e=>(0,C.jsx)("option",{value:e,children:e},e))}),(0,C.jsx)("button",{className:"bg-zinc-700 rounded px-3 py-0.5 shadow",onClick:()=>{null==n||n.stop()},children:"Stop all"})]}),(0,C.jsxs)("div",{className:"flex gap-4 mb-2 no-select",children:[(0,C.jsx)("div",{children:"Volume:"}),(0,C.jsx)("input",{type:"range",min:0,max:127,step:1,value:d,onChange:e=>{let t=e.target.valueAsNumber;null==n||n.output.setVolume(t),p(t)}}),(0,C.jsx)("div",{children:"Reverb:"}),(0,C.jsx)("input",{type:"range",min:0,max:1,step:.001,value:u,onChange:e=>{let t=e.target.valueAsNumber;null==n||n.output.sendEffect("reverb",t),c(t)}})]}),(0,C.jsx)(eT,{borderColor:"border-rose-700",onPress:e=>{var t;n&&(e.time=(null!==(t=e.time)&&void 0!==t?t:0)+n.context.currentTime,n.start(e))},onRelease:e=>{null==n||n.stop({stopId:e})}})]})]})}function eO(e){let{className:t}=e,[n,a]=ew(),[s,i]=(0,E.useState)(eM()[0]),[l,r]=(0,E.useState)("marimba"),[u,c]=(0,E.useState)(void 0),[d,p]=(0,E.useState)(0),[h,f]=(0,E.useState)(100);function m(e,t){let n=eC();null!=o||(o=new ex(n));let s=new e_(n,{kit:e,instrument:t});s.output.addEffect("reverb",o,0),s.loaded().then(()=>{a("ready"),c(s)}).catch(e=>{a("error"),console.log("Instrument error",e)})}return(0,C.jsxs)("div",{className:t,children:[(0,C.jsxs)("div",{className:"flex gap-2 items-end mb-2",children:[(0,C.jsx)("h1",{className:"text-3xl",children:"Soundfont"}),(0,C.jsx)(eF,{status:n,onClick:()=>{m(s,l)}}),(0,C.jsx)(ek,{instrument:u})]}),(0,C.jsxs)("div",{className:"ready"!==n?"opacity-30 no-select":"no-select",children:[(0,C.jsxs)("div",{className:"flex gap-4 mb-2",children:[(0,C.jsx)("select",{className:"appearance-none bg-zinc-700 text-zinc-200 rounded border border-gray-400 py-2 px-3 leading-tight focus:outline-none focus:border-blue-500",value:s,onChange:e=>{let t=e.target.value;m(t,l),i(t)},children:eM().map(e=>(0,C.jsx)("option",{value:e,children:e},e))}),(0,C.jsx)("select",{className:"appearance-none bg-zinc-700 text-zinc-200 rounded border border-gray-400 py-2 px-3 leading-tight focus:outline-none focus:border-blue-500",value:l,onChange:e=>{let t=e.target.value;m(s,t),r(t)},children:["accordion","acoustic_bass","acoustic_grand_piano","acoustic_guitar_nylon","acoustic_guitar_steel","agogo","alto_sax","applause","bagpipe","banjo","baritone_sax","bassoon","bird_tweet","blown_bottle","brass_section","breath_noise","bright_acoustic_piano","celesta","cello","choir_aahs","church_organ","clarinet","clavinet","contrabass","distortion_guitar","drawbar_organ","dulcimer","electric_bass_finger","electric_bass_pick","electric_grand_piano","electric_guitar_clean","electric_guitar_jazz","electric_guitar_muted","electric_piano_1","electric_piano_2","english_horn","fiddle","flute","french_horn","fretless_bass","fx_1_rain","fx_2_soundtrack","fx_3_crystal","fx_4_atmosphere","fx_5_brightness","fx_6_goblins","fx_7_echoes","fx_8_scifi","glockenspiel","guitar_fret_noise","guitar_harmonics","gunshot","harmonica","harpsichord","helicopter","honkytonk_piano","kalimba","koto","lead_1_square","lead_2_sawtooth","lead_3_calliope","lead_4_chiff","lead_5_charang","lead_6_voice","lead_7_fifths","lead_8_bass__lead","marimba","melodic_tom","music_box","muted_trumpet","oboe","ocarina","orchestra_hit","orchestral_harp","overdriven_guitar","pad_1_new_age","pad_2_warm","pad_3_polysynth","pad_4_choir","pad_5_bowed","pad_6_metallic","pad_7_halo","pad_8_sweep","pan_flute","percussive_organ","piccolo","pizzicato_strings","recorder","reed_organ","reverse_cymbal","rock_organ","seashore","shakuhachi","shamisen","shanai","sitar","slap_bass_1","slap_bass_2","soprano_sax","steel_drums","string_ensemble_1","string_ensemble_2","synth_bass_1","synth_bass_2","synth_brass_1","synth_brass_2","synth_choir","synth_drum","synth_strings_1","synth_strings_2","taiko_drum","tango_accordion","telephone_ring","tenor_sax","timpani","tinkle_bell","tremolo_strings","trombone","trumpet","tuba","tubular_bells","vibraphone","viola","violin","voice_oohs","whistle","woodblock","xylophone"].map(e=>(0,C.jsx)("option",{value:e,children:e},e))}),(0,C.jsx)("button",{className:"bg-zinc-700 rounded px-3 py-0.5 shadow",onClick:()=>{null==u||u.stop()},children:"Stop all"})]}),(0,C.jsxs)("div",{className:"flex gap-4 mb-2",children:[(0,C.jsx)("div",{children:"Volume:"}),(0,C.jsx)("input",{type:"range",min:0,max:127,step:1,value:h,onChange:e=>{let t=e.target.valueAsNumber;null==u||u.output.setVolume(t),f(t)}}),(0,C.jsx)("div",{children:"Reverb:"}),(0,C.jsx)("input",{type:"range",min:0,max:1,step:.001,value:d,onChange:e=>{let t=e.target.valueAsNumber;null==u||u.output.sendEffect("reverb",t),p(t)}})]}),(0,C.jsx)(eT,{borderColor:"border-teal-600",onPress:e=>{var t;u&&(e.time=(null!==(t=e.time)&&void 0!==t?t:0)+u.context.currentTime,u.start(e))},onRelease:e=>{null==u||u.stop({stopId:e})}})]})]})}function eW(e){let{className:t}=e,[n,a]=(0,E.useState)(void 0),[s,i]=ew(),[l,r]=(0,E.useState)(0),[o,c]=(0,E.useState)(100);return(0,C.jsxs)("div",{className:t,children:[(0,C.jsxs)("div",{className:"flex gap-2 items-end mb-2",children:[(0,C.jsx)("h1",{className:"text-3xl",children:"Piano"}),(0,C.jsx)(eF,{status:s,onClick:function(){if(n)return;i("loading");let e=eC();null!=u||(u=new ex(e));let t=new ej(e,{volume:o});t.output.addEffect("reverb",u,l),a(t),t.loaded().then(()=>{i("ready")})}}),(0,C.jsx)(ek,{instrument:n})]}),(0,C.jsx)("div",{}),(0,C.jsxs)("div",{className:"ready"!==s?"opacity-30":"",children:[(0,C.jsx)("div",{className:"flex gap-4 mb-2 no-select",children:(0,C.jsx)("button",{className:"bg-zinc-700 rounded px-3 py-0.5 shadow",onClick:()=>{null==n||n.stop()},children:"Stop all"})}),(0,C.jsxs)("div",{className:"flex gap-4 mb-2 no-select",children:[(0,C.jsx)("div",{children:"Volume:"}),(0,C.jsx)("input",{type:"range",min:0,max:128,step:1,value:o,onChange:e=>{let t=e.target.valueAsNumber;null==n||n.output.setVolume(t),c(t)}}),(0,C.jsx)("div",{children:"Reverb:"}),(0,C.jsx)("input",{type:"range",min:0,max:1,step:.001,value:l,onChange:e=>{let t=e.target.valueAsNumber;null==n||n.output.sendEffect("reverb",t),r(t)}})]}),(0,C.jsx)(eT,{borderColor:"border-rose-700",onPress:e=>{var t;n&&(e.time=(null!==(t=e.time)&&void 0!==t?t:0)+n.context.currentTime,n.start(e))},onRelease:e=>{null==n||n.stop({stopId:e})}})]})]})}function eV(){return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(G(),{children:[(0,C.jsx)("title",{children:"smplr"}),(0,C.jsx)("meta",{name:"description",content:"Plug and play web instruments"}),(0,C.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),(0,C.jsxs)("main",{className:"max-w-4xl mx-auto my-20 p-4"+k().className,children:[(0,C.jsxs)("div",{className:"flex items-end mb-16",children:[(0,C.jsx)("h1",{className:"text-6xl font-bold",children:"smplr"}),(0,C.jsx)("div",{children:"0.5.0"})]}),(0,C.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,C.jsx)(eW,{}),(0,C.jsx)(eO,{}),(0,C.jsx)(ez,{}),(0,C.jsx)(eR,{}),(0,C.jsx)(eN,{})]})]})]})}}},function(e){e.O(0,[643,619,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);