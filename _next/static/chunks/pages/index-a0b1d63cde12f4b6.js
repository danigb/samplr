(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(2024)}])},2024:function(e,t,n){"use strict";let s,i,l,a,r,o,u,c,d,p,h,m,f;n.r(t),n.d(t,{default:function(){return tj}});var g,v,y,b,x,P,_,j,M,w,N,D,C,S,F,k,A,I,E,G,T,R,B,O,z,L,V,W,U,H=n(5893),$=n(2083),q=n.n($),X=n(9008),K=n.n(X),Z=n(7294),J=Object.defineProperty,Y=Object.defineProperties,Q=Object.getOwnPropertyDescriptors,ee=Object.getOwnPropertySymbols,et=Object.prototype.hasOwnProperty,en=Object.prototype.propertyIsEnumerable,es=(e,t,n)=>t in e?J(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ei=(e,t)=>{for(var n in t||(t={}))et.call(t,n)&&es(e,n,t[n]);if(ee)for(var n of ee(t))en.call(t,n)&&es(e,n,t[n]);return e},el=(e,t)=>Y(e,Q(t)),ea=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},er=(e,t,n)=>(ea(e,t,"read from private field"),n?n.call(e):t.get(e)),eo=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},eu=(e,t,n,s)=>(ea(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),ec=(e,t,n)=>(ea(e,t,"access private method"),n),ed=(e,t,n)=>new Promise((s,i)=>{var l=e=>{try{r(n.next(e))}catch(e){i(e)}},a=e=>{try{r(n.throw(e))}catch(e){i(e)}},r=e=>e.done?s(e.value):Promise.resolve(e.value).then(l,a);r((n=n.apply(e,t)).next())});function ep(e){let t=e.filter(e=>!!e);return t.reduce((e,t)=>{let n="output"in e?e.output:e,s="input"in t?t.input:t;return n.connect(s),t}),()=>{t.reduce((e,t)=>{let n="output"in e?e.output:e,s="input"in t?t.input:t;return n.disconnect(s),t})}}function eh(e){let t=e,n=new Set;return{subscribe:function(e){return n.add(e),e(t),()=>{n.delete(e)}},set:function(e){t=e,n.forEach(e=>e(t))},get:function(){return t}}}function em(e){return e*e/16129}var ef=class{constructor(e,t){var n,s;this.context=e,eo(this,g,void 0),eo(this,v,void 0),eo(this,y,void 0),eo(this,b,void 0),eo(this,x,void 0),eo(this,P,void 0),eo(this,_,!1),eu(this,P,ei({destination:e.destination,volume:100,volumeToGain:em},t)),this.input=e.createGain(),eu(this,g,e.createGain()),eu(this,b,ep([this.input,er(this,g),er(this,P).destination]));let i=eh(null!=(n=t.volume)?n:100);this.setVolume=i.set;let l=null!=(s=t.volumeToGain)?s:em;eu(this,x,i.subscribe(e=>{er(this,g).gain.value=l(e)}))}addInsert(e){if(er(this,_))throw Error("Can't add insert to disconnected channel");null!=er(this,y)||eu(this,y,[]),er(this,y).push(e),er(this,b).call(this),eu(this,b,ep([this.input,...er(this,y),er(this,g),er(this,P).destination]))}addEffect(e,t,n){if(er(this,_))throw Error("Can't add effect to disconnected channel");let s=new GainNode(this.context);s.gain.value=n;let i="input"in t?t.input:t,l=ep([er(this,g),s,i]);null!=er(this,v)||eu(this,v,[]),er(this,v).push({name:e,mix:s,disconnect:l})}sendEffect(e,t){var n;if(er(this,_))throw Error("Can't send effect to disconnected channel");let s=null==(n=er(this,v))?void 0:n.find(t=>t.name===e);s?s.mix.gain.value=t:console.warn("Send bus not found: "+e)}disconnect(){var e;er(this,_)||(eu(this,_,!0),er(this,b).call(this),er(this,x).call(this),null==(e=er(this,v))||e.forEach(e=>e.disconnect()),eu(this,v,void 0))}};g=new WeakMap,v=new WeakMap,y=new WeakMap,b=new WeakMap,x=new WeakMap,P=new WeakMap,_=new WeakMap;var eg=class{constructor(e){this.compare=e,eo(this,j,[])}push(e){let t=er(this,j).length,n=0,s=t-1,i=t;for(;n<=s;){let t=Math.floor((n+s)/2);0>this.compare(e,er(this,j)[t])?(i=t,s=t-1):n=t+1}er(this,j).splice(i,0,e)}pop(){return er(this,j).shift()}peek(){return er(this,j)[0]}removeAll(e){let t=er(this,j).length;return eu(this,j,er(this,j).filter(t=>!e(t))),er(this,j).length!==t}clear(){eu(this,j,[])}size(){return er(this,j).length}};j=new WeakMap;var ev=class{constructor(e,t){eo(this,M,void 0),eo(this,w,void 0),eu(this,M,new eg((e,t)=>e.time-t.time)),this.player=e}get context(){return this.player.context}get buffers(){return this.player.buffers}get isRunning(){return void 0!==er(this,w)}start(e){var t;let n=this.player.context,s=n.currentTime,i=null!=(t=e.time)?t:s;return i<s+1?this.player.start(e):(er(this,M).push(el(ei({},e),{time:i})),er(this,w)||eu(this,w,setInterval(()=>{let e=n.currentTime+1;for(;er(this,M).size()&&er(this,M).peek().time<=e;){let e=er(this,M).pop();e&&this.player.start(e)}er(this,M).size()||(clearInterval(er(this,w)),eu(this,w,void 0))},200)),t=>{(!t||t<i)&&er(this,M).removeAll(t=>t===e)||this.player.stop(el(ei({},e),{time:t}))})}stop(e){var t;if(this.player.stop(e),!e){er(this,M).clear();return}let n=null!=(t=null==e?void 0:e.time)?t:0,s=null==e?void 0:e.stopId;s?er(this,M).removeAll(e=>e.time>=n&&e.stopId?e.stopId===s:e.note===s):er(this,M).removeAll(e=>e.time>=n)}disconnect(){this.player.disconnect()}};M=new WeakMap,w=new WeakMap;var ey=class{constructor(e,t){var n;this.destination=e,this.options=t,eo(this,N,!1),eo(this,D,void 0),this.context=e.context,this.buffers={},eu(this,D,function(){let e=new Set;return{subscribe:function(t){return e.add(t),()=>{e.delete(t)}},trigger:function(t){e.forEach(e=>e(t))}}}()),this.velocityToGain=null!=(n=t.velocityToGain)?n:em}start(e){var t,n,s,i,l,a,r,o,u,c,d,p,h,m;let f;if(er(this,N))throw Error("Can't start a sample on disconnected player");let{destination:g,context:v}=this,y=e.name&&this.buffers[e.name]||this.buffers[e.note];if(!y)return console.warn(`Sample not found: '${e.note}'`),()=>void 0;let b=v.createBufferSource();b.buffer=y,b.detune.value=null!=(n=null!=(t=e.detune)?t:this.options.detune)?n:0;let x=null!=(s=e.lpfCutoffHz)?s:this.options.lpfCutoffHz,P=x?new BiquadFilterNode(v,{type:"lowpass",frequency:e.lpfCutoffHz}):void 0,_=v.createGain(),j=null!=(l=null!=(i=e.velocity)?i:this.options.velocity)?l:100;_.gain.value=this.velocityToGain(j);let M=null!=(a=e.loop)?a:this.options.loop;M&&(b.loop=!0,b.loopStart=null!=(r=e.loopStart)?r:0,b.loopEnd=null!=(o=e.loopEnd)?o:y.duration);let w=null!=(u=e.decayTime)?u:this.options.decayTime,[C,S]=function(e,t=.2){let n=0,s=new GainNode(e,{gain:1});return[s,function(i){if(n)return n;s.gain.cancelScheduledValues(i);let l=i||e.currentTime;return n=l+t,s.gain.setValueAtTime(1,l),s.gain.linearRampToValueAtTime(0,n),n}]}(v,w);function F(e){if(null!=e||(e=v.currentTime),e<=E)b.stop(e);else{let t=S(e);b.stop(t)}}let k=e.gainOffset?new GainNode(v,{gain:e.gainOffset}):void 0,A=null!=(c=e.stopId)?c:e.note,I=(m=[ep([b,P,_,C,k,g]),null==(d=e.stop)?void 0:d.call(e,F),er(this,D).subscribe(e=>{e&&void 0!==e.stopId&&e.stopId!==A||F(null==e?void 0:e.time)})],f=!1,()=>{f||(f=!0,m.forEach(e=>null==e?void 0:e()))});b.onended=()=>{var t;I(),null==(t=e.onEnded)||t.call(e,e)};let E=Math.max(null!=(p=e.time)?p:0,v.currentTime);b.start(e.time);let G=null!=(h=e.duration)?h:y.duration;return"number"==typeof e.duration&&F(E+G),F}stop(e){er(this,D).trigger(e)}disconnect(){er(this,N)||(eu(this,N,!0),this.stop(),Object.keys(this.buffers).forEach(e=>{delete this.buffers[e]}))}get connected(){return!er(this,N)}};N=new WeakMap,D=new WeakMap;var eb=class{constructor(e,t){this.context=e;let n=new ef(e,t);this.player=new ev(new ey(e.destination,t),t),this.output=n}get buffers(){return this.player.buffers}start(e){return this.player.start(e)}stop(e){this.player.stop("object"==typeof e?e:void 0!==e?{stopId:e}:void 0)}disconnect(){this.output.disconnect(),this.player.disconnect()}};function ex(e,t,n){return ed(this,null,function*(){t=t.replace(/#/g,"%23").replace(/([^:]\/)\/+/g,"$1");let s=yield n.fetch(t);if(200!==s.status){console.warn("Error loading buffer. Invalid status: ",s.status,t);return}try{let t=yield s.arrayBuffer(),n=yield e.decodeAudioData(t);return n}catch(e){console.warn("Error loading buffer",e,t)}})}function eP(e){if("undefined"==typeof document)return null;let t=document.createElement("audio");for(let n=0;n<e.length;n++){let s=e[n],i=t.canPlayType(`audio/${s}`);if("probably"===i||"maybe"===i)return s;if("m4a"===s){let e=t.canPlayType("audio/aac");if("probably"===e||"maybe"===e)return s}}return null}function e_(){var e;let t=null!=(e=eP(["ogg","m4a"]))?e:"ogg";return"."+t}var ej={fetch:e=>fetch(e)},eM=class{constructor(e="smplr"){eo(this,S),eo(this,k),eo(this,C,void 0),"undefined"!=typeof window&&"caches"in window?eu(this,C,caches.open(e)):eu(this,C,Promise.reject("CacheStorage not supported"))}fetch(e){return ed(this,null,function*(){let t=new Request(e);try{return yield ec(this,S,F).call(this,t)}catch(n){let e=yield fetch(t);return yield ec(this,k,A).call(this,t,e),e}})}};C=new WeakMap,S=new WeakSet,F=function(e){return ed(this,null,function*(){let t=yield er(this,C),n=yield t.match(e);if(n)return n;throw Error("Not found")})},k=new WeakSet,A=function(e,t){return ed(this,null,function*(){try{let n=yield er(this,C);yield n.put(e,t.clone())}catch(e){}})};var ew={baseUrl:"",name:"",samples:[],sampleNames:[],nameToSample:{},sampleNameVariations:{}};function eN(){return Object.keys(eD)}var eD={"TR-808":"https://danigb.github.io/samples/drum-machines/TR-808/dm.json","Casio-RZ1":"https://danigb.github.io/samples/drum-machines/Casio-RZ1/dm.json","LM-2":"https://danigb.github.io/samples/drum-machines/LM-2/dm.json","MFB-512":"https://danigb.github.io/samples/drum-machines/MFB-512/dm.json","Roland CR-8000":"https://danigb.github.io/samples/drum-machines/Roland-CR-8000/dm.json"},eC=class{constructor(e,t){var n,s;eo(this,I,ew),t=Object.assign({},t);let i=null!=(n=t.storage)?n:ej,l=eD[null!=(s=t.instrument)?s:"TR-808"];if(!l)throw Error("Invalid instrument: "+t.instrument);let a=function(e,t){return ed(this,null,function*(){var n,s;let i=yield t.fetch(e),l=yield i.json();for(let t of(l.baseUrl=e.replace("/dm.json",""),l.sampleNames=[],l.nameToSample={},l.sampleNameVariations={},l.samples)){let e=-1!==t.indexOf("/")?t:t.replace("-","/");l.nameToSample[e]=e;let[i,a]=e.split("/");l.sampleNames.includes(i)||l.sampleNames.push(i),null!=(n=l.nameToSample)[i]||(n[i]=e),null!=(s=l.sampleNameVariations)[i]||(s[i]=[]),a&&l.sampleNameVariations[i].push(`${i}/${a}`)}return l})}(l,i);this.player=new eb(e,t),this.output=this.player.output,this.load=(function(e,t,n,s){var i;let l=null!=(i=eP(["ogg","m4a"]))?i:"ogg";return n.then(n=>Promise.all(n.samples.map(i=>ed(this,null,function*(){let a=`${n.baseUrl}/${i}.${l}`,r=-1!==i.indexOf("/")?i:i.replace("-","/"),o=yield ex(e,a,s);o&&(t[r]=o)}))))})(e,this.player.buffers,a,i).then(()=>this),a.then(e=>{eu(this,I,e)})}loaded(){return ed(this,null,function*(){return console.warn("deprecated: use load instead"),this.load})}get sampleNames(){return er(this,I).sampleNames}getVariations(e){var t;return null!=(t=er(this,I).sampleNameVariations[e])?t:[]}start(e){var t;let n=er(this,I).nameToSample[e.note];return this.player.start(el(ei({},e),{note:n||e.note,stopId:null!=(t=e.stopId)?t:e.note}))}stop(e){return this.player.stop(e)}};function eS(e){return void 0===e?void 0:"number"==typeof e?e:function(e){let t=/^([a-gA-G]?)(#{1,}|b{1,}|)(-?\d+)$/.exec(e);if(!t)return;let n=t[1].toUpperCase();if(!n)return;let s=t[2],i="b"===s[0]?-s.length:s.length,l=t[3]?+t[3]:4,a=(n.charCodeAt(0)+3)%7;return[0,2,4,5,7,9,11][a]+i+12*(l+1)}(e)}function eF(e,t){return ed(this,null,function*(){try{let t=yield fetch(e),n=yield t.json();return n}catch(t){throw console.warn(`Can't load SFZ file ${e}`,t),Error(`Can't load SFZ file ${e}`)}})}function ek(e,t,n){return(void 0===t||void 0!==e&&e>=t)&&(void 0===n||void 0!==e&&e<=n)}I=new WeakMap;var eA=Object.freeze({meta:{},global:{},groups:[]}),eI=class{constructor(e,t){var n;this.context=e,eo(this,G),eo(this,E,void 0),this.options=Object.freeze(Object.assign({},t)),this.player=new eb(e,t),eu(this,E,eA);let s=null!=(n=t.storage)?n:ej;this.load=(function(e,t){return ed(this,null,function*(){if("string"==typeof e)return eF(e,t);if("global"in e)return e;if("websfzUrl"in e){let n=yield eF(e.websfzUrl,t);return null!=n.meta||(n.meta={}),e.name&&(n.meta.name=e.name),e.baseUrl&&(n.meta.baseUrl=e.baseUrl),e.formats&&(n.meta.formats=e.formats),n}throw Error("Invalid instrument: "+JSON.stringify(e))})})(t.instrument,s).then(t=>(eu(this,E,Object.freeze(t)),function(e,t,n,s){return ed(this,null,function*(){n.groups.forEach(i=>{let l=function(e,t){var n,s,i,l;let a={},r=null!=(n=e.meta.baseUrl)?n:"",o=null!=(i=eP(null!=(s=e.meta.formats)?s:[]))?i:"ogg",u=null!=(l=e.global.default_path)?l:"";return t?t.regions.reduce((e,t)=>(t.sample&&(e[t.sample]=`${r}/${u}${t.sample}.${o}`),e),a):a}(n,i);return function(e,t,n,s){return ed(this,null,function*(){yield Promise.all(Object.keys(n).map(i=>ed(this,null,function*(){if(t[i])return;let l=yield ex(e,n[i],s);return l&&(t[i]=l),t})))})}(e,t,l,s)})})}(e,this.player.buffers,er(this,E),s))).then(()=>this)}get output(){return this.player.output}loaded(){return ed(this,null,function*(){return console.warn("deprecated: use load instead"),this.load})}start(e){ec(this,G,T).call(this,"object"==typeof e?e:{note:e})}stop(e){this.player.stop(e)}disconnect(){this.player.disconnect()}};E=new WeakMap,G=new WeakSet,T=function(e){var t;let n=eS(e.note);if(void 0===n)return()=>void 0;let s=null!=(t=e.velocity)?t:this.options.velocity,i=function(e,t){let n=[];for(let s of e.groups)if(ek(t.midi,s.lokey,s.hikey)&&ek(t.velocity,s.lovel,s.hivel)&&ek(t.cc64,s.locc64,s.hicc64))for(let e of s.regions)ek(t.midi,e.lokey,e.hikey)&&ek(t.velocity,e.lovel,e.hivel)&&ek(t.cc64,s.locc64,s.hicc64)&&n.push([s,e]);return n}(er(this,E),{midi:n,velocity:s}),l=()=>{var t;null==(t=e.onEnded)||t.call(e,e)},a=i.map(([t,s])=>{var i,a,r,o;let u=null!=(a=null!=(i=s.pitch_keycenter)?i:s.key)?a:n,c=(n-u)*100;return this.player.start(el(ei({},e),{note:s.sample,decayTime:e.decayTime,detune:c+(null!=(o=null!=(r=e.detune)?r:this.options.detune)?o:0),onEnded:l,stopId:n}))});switch(a.length){case 0:return()=>void 0;case 1:return a[0];default:return e=>a.forEach(t=>t(e))}};var eE={CP80:"https://danigb.github.io/samples/gs-e-pianos/CP80/cp80.websfz.json",PianetT:"https://danigb.github.io/samples/gs-e-pianos/Pianet T/pianet-t.websfz.json",WurlitzerEP200:"https://danigb.github.io/samples/gs-e-pianos/Wurlitzer EP200/wurlitzer-ep200.websfz.json",TX81Z:"https://danigb.github.io/samples/vcsl/TX81Z/tx81z-fm-piano.websfz.json"},eG=class extends eI{constructor(e,t){var n;super(e,el(ei({},t),{instrument:null!=(n=eE[t.instrument])?n:t.instrument}));let s=eh(0);this.tremolo={level:e=>s.set(em(e))};let i=function(e,t){let n=new GainNode(e),s=new GainNode(e);n.channelCount=2,n.channelCountMode="explicit";let i=new ChannelSplitterNode(e,{numberOfOutputs:2}),l=new GainNode(e),a=new GainNode(e),r=new ChannelMergerNode(e,{numberOfInputs:2}),o=new OscillatorNode(e,{type:"sine",frequency:1});o.start();let u=new GainNode(e),c=new OscillatorNode(e,{type:"sine",frequency:1.1});c.start();let d=new GainNode(e);n.connect(i),i.connect(l,0),i.connect(a,1),l.connect(r,0,0),a.connect(r,0,1),o.connect(u),u.connect(l.gain),c.connect(d),d.connect(a.gain),r.connect(s);let p=t(e=>{u.gain.value=e,d.gain.value=e});return n.disconnect=()=>{p(),o.stop(),c.stop(),n.disconnect(i),i.disconnect(l,0),i.disconnect(a,1),l.disconnect(r,0,0),a.disconnect(r,0,1),o.disconnect(l),c.disconnect(a),r.disconnect(s)},{input:n,output:s}}(e,s.subscribe);this.output.addInsert(i)}};function eT(e={}){return{regions:[],sample:e}}function eR(e,t,n){let s=[],i=eS(t.note);if(void 0===i)return s;for(let l of e.regions){let a=eO(i,null!=n?n:0,t,l,e.sample);a&&s.push(a)}return s}function eB(e,t,n){let s=eS(t.note);if(void 0!==s)for(let i of e.regions){let l=eO(s,null!=n?n:0,t,i,e.sample);if(l)return l}}function eO(e,t,n,s,i){var l,a,r,o,u,c,d,p,h,m,f,g,v,y,b,x,P,_,j,M,w,N,D,C,S,F,k;let A=e>=(null!=(l=s.midiLow)?l:0)&&e<=(null!=(a=s.midiHigh)?a:127);if(!A)return;let I=void 0===n.velocity||n.velocity>=(null!=(r=s.velLow)?r:0)&&n.velocity<=(null!=(o=s.velHigh)?o:127);if(!I)return;if(s.seqLength){let e=t%s.seqLength,n=(null!=(u=s.seqPosition)?u:1)-1;if(e!==n)return}let E=e-s.midiPitch,G=null!=(c=n.velocity)?c:i.velocity,T=s.volume?Math.pow(10,s.volume/20):0,R=null!=(p=null!=(d=n.gainOffset)?d:i.gainOffset)?p:0;return{note:e,name:s.sampleName,detune:100*(E+(null!=(h=s.tune)?h:0)),velocity:void 0==G?void 0:G,decayTime:null!=(g=null!=(f=null==n?void 0:n.decayTime)?f:null==(m=s.sample)?void 0:m.decayTime)?g:i.decayTime,duration:null!=(b=null!=(y=null==n?void 0:n.duration)?y:null==(v=s.sample)?void 0:v.duration)?b:i.duration,loop:null!=(_=null!=(P=null==n?void 0:n.loop)?P:null==(x=s.sample)?void 0:x.loop)?_:i.loop,loopStart:null!=(w=null!=(M=null==n?void 0:n.loopStart)?M:null==(j=s.sample)?void 0:j.loopStart)?w:i.loopStart,loopEnd:null!=(C=null!=(D=null==n?void 0:n.loopEnd)?D:null==(N=s.sample)?void 0:N.loopEnd)?C:i.loopEnd,lpfCutoffHz:null!=(k=null!=(F=null==n?void 0:n.lpfCutoffHz)?F:null==(S=s.sample)?void 0:S.lpfCutoffHz)?k:i.lpfCutoffHz,stopId:n.name,gainOffset:R+T||void 0,time:n.time}}function ez(e){if(0===e.length)return[];if(e.sort((e,t)=>e.midiPitch-t.midiPitch),e[0].midiLow=0,e[0].midiHigh=127,1===e.length)return e;for(let t=1;t<e.length;t++){let n=e[t-1],s=e[t],i=Math.floor((n.midiPitch+s.midiPitch)/2);n.midiHigh=i,s.midiLow=i+1}return e[e.length-1].midiHigh=127,e}var eL=class{constructor(e,t){this.context=e,this.seqNum=0;let n=new ef(e,t);this.group=eT(),this.player=new ev(new ey(e.destination,t),t),this.output=n}get buffers(){return this.player.buffers}start(e){let t=eR(this.group,"object"==typeof e?e:{note:e},this.seqNum);this.seqNum++;let n=t.map(e=>this.player.start(e));return e=>n.forEach(t=>t(e))}stop(e){if(void 0==e){this.player.stop();return}let t="object"==typeof e?e:{stopId:e},n=eS(t.stopId);n&&(t.stopId=n,this.player.stop(t))}disconnect(){this.output.disconnect(),this.player.disconnect()}};function eV(e,t){let n=e_();return(s,i)=>ed(this,null,function*(){let l=yield fetch(e).then(e=>e.text()),a=function(e,t){let n="global",s=e.split("\n").map(eq).filter(e=>!!e),i=new eX,l=[];for(let e of s)switch(e.type){case"mode":l.push(i.closeScope(n,t)),n=e.value;break;case"prop:num":case"prop:str":case"prop:num_arr":i.push(e.key,e.value);break;case"unknown":console.warn("Unknown SFZ token",e.value)}return l.filter(e=>!!e)}(l,t.group);a.length&&console.warn("Problems converting sfz",a);let r=new Set;return t.group.regions.forEach(e=>r.add(e.sampleName)),Promise.all(Array.from(r).map(e=>ed(this,null,function*(){let l=t.urlFromSampleName(e,n),a=yield ex(s,l,i);t.buffers[e]=a})))})}var eW=/^<([^>]+)>$/,eU=/^([^=]+)=([-\.\d]+)$/,eH=/^([^=]+)=(.+)$/,e$=/^([^=]+)_(\d+)=(\d+)$/;function eq(e){if(""===(e=e.trim())||e.startsWith("//"))return;let t=e.match(eW);if(t)return{type:"mode",value:t[1]};let n=e.match(e$);if(n)return{type:"prop:num_arr",key:n[1],value:[Number(n[2]),Number(n[3])]};let s=e.match(eU);if(s)return{type:"prop:num",key:s[1],value:Number(s[2])};let i=e.match(eH);return i?{type:"prop:str",key:i[1],value:i[2]}:{type:"unknown",value:e}}var eX=class{constructor(){eo(this,R),this.values={},this.global={},this.group={}}closeScope(e,t){if("global"===e)ec(this,R,B).call(this,this.global);else if("group"===e)this.group=ec(this,R,B).call(this,{});else if("region"===e){let e=ec(this,R,B).call(this,ei(ei({sampleName:"",midiPitch:-1},this.global),this.group));if(""===e.sampleName)return"Missing sample name";if(-1===e.midiPitch){if(void 0===e.midiLow)return"Missing pitch_keycenter";e.midiPitch=e.midiLow}e.seqLength&&void 0===e.seqPosition&&(e.seqPosition=1),e.ampRelease&&(e.sample={decayTime:e.ampRelease},delete e.ampRelease),t.regions.push(e)}}get empty(){return 0===Object.keys(this.values).length}get keys(){return Object.keys(this.values)}push(e,t){this.values[e]=t}popNum(e,t,n){return"number"==typeof this.values[e]&&(t[n]=this.values[e],delete this.values[e],!0)}popStr(e,t,n){return"string"==typeof this.values[e]&&(t[n]=this.values[e],delete this.values[e],!0)}popNumArr(e,t,n){return!!Array.isArray(this.values[e])&&(t[n]=this.values[e],delete this.values[e],!0)}};R=new WeakSet,B=function(e){return this.popStr("sample",e,"sampleName"),this.popNum("pitch_keycenter",e,"midiPitch"),this.popNum("ampeg_attack",e,"ampAttack"),this.popNum("ampeg_release",e,"ampRelease"),this.popNum("bend_down",e,"bendDown"),this.popNum("bend_up",e,"bendUp"),this.popNum("group",e,"group"),this.popNum("hikey",e,"midiHigh"),this.popNum("hivel",e,"velHigh"),this.popNum("lokey",e,"midiLow"),this.popNum("offset",e,"offset"),this.popNum("lovel",e,"velLow"),this.popNum("off_by",e,"groupOffBy"),this.popNum("pitch_keytrack",e,"ignore"),this.popNum("seq_length",e,"seqLength"),this.popNum("seq_position",e,"seqPosition"),this.popNum("tune",e,"tune"),this.popNum("volume",e,"volume"),this.popNumArr("amp_velcurve",e,"ampVelCurve"),this.values={},e};var eK=[],eZ="https://smpldsnds.github.io/sgossner-vcsl/",eJ=class{constructor(e,t={}){var n,s;this.config={instrument:null!=(n=t.instrument)?n:"Arco",storage:null!=(s=t.storage)?s:ej},this.player=new eL(e,t);let i=function(e,t,n){let s=eZ+e+".sfz",i=e.slice(0,e.lastIndexOf("/")+1),l=`https://smpldsnds.github.io/sgossner-vcsl/${i}`;return eV(s,{buffers:t,group:n,urlFromSampleName:(e,t)=>l+"/"+e.replace(".wav",t)})}(this.config.instrument,this.player.buffers,this.player.group);this.load=i(e,this.config.storage).then(()=>this)}get output(){return this.player.output}get buffers(){return this.player.buffers}get context(){return this.player.context}start(e){return this.player.start(e)}stop(e){return this.player.stop(e)}disconnect(){this.player.disconnect()}},eY=class extends eJ{constructor(e,t){var n;super(e,el(ei({},t),{instrument:eQ[null!=(n=t.instrument)?n:""]}))}},eQ={"Balafon - Hard Mallet":"Idiophones/Struck Idiophones/Balafon - Hard Mallet","Balafon - Keyswitch":"Idiophones/Struck Idiophones/Balafon - Keyswitch","Balafon - Soft Mallet":"Idiophones/Struck Idiophones/Balafon - Soft Mallet","Balafon - Traditional Mallet":"Idiophones/Struck Idiophones/Balafon - Traditional Mallet","Tubular Bells 1":"Idiophones/Struck Idiophones/Tubular Bells 1","Tubular Bells 2":"Idiophones/Struck Idiophones/Tubular Bells 2","Vibraphone - Bowed":"Idiophones/Struck Idiophones/Vibraphone - Bowed","Vibraphone - Hard Mallets":"Idiophones/Struck Idiophones/Vibraphone - Hard Mallets","Vibraphone - Keyswitch":"Idiophones/Struck Idiophones/Vibraphone - Keyswitch","Vibraphone - Soft Mallets":"Idiophones/Struck Idiophones/Vibraphone - Soft Mallets","Xylophone - Hard Mallets":"Idiophones/Struck Idiophones/Xylophone - Hard Mallets","Xylophone - Keyswitch":"Idiophones/Struck Idiophones/Xylophone - Keyswitch","Xylophone - Medium Mallets":"Idiophones/Struck Idiophones/Xylophone - Medium Mallets","Xylophone - Soft Mallets":"Idiophones/Struck Idiophones/Xylophone - Soft Mallets"},e0={"300 STRINGS CELLO":["300 STRINGS","CELL"],"300 STRINGS VIOLA":["300 STRINGS","VIOL"]},e1=class{constructor(e,t){var n,s,i,l,a;let r;this.context=e,this.config={instrument:null!=(n=t.instrument)?n:"MKII VIOLINS",storage:null!=(s=t.storage)?s:ej},this.player=new eb(e,t),this.group=eT(t);let o=(i=this.config.instrument,l=this.player.buffers,a=this.group,(r=e0[i])&&(i=r[0]),(e,t)=>{let n=`https://smpldsnds.github.io/archiveorg-mellotron/${i}/`,s=e_();return fetch(n+"files.json").then(e=>e.json()).then(i=>Promise.all(i.map(i=>{var o;if(r&&!i.includes(r[1]))return;let u=eS(null!=(o=i.split(" ")[0])?o:"");if(!u)return;let c=n+i+s;ex(e,c,t).then(e=>{var t;l[i]=e;let n=null!=(t=null==e?void 0:e.duration)?t:0;a.regions.push({sampleName:i,midiPitch:u,sample:{loop:!0,loopStart:n/10,loopEnd:n-n/10}})})}))).then(()=>{ez(a.regions)})});this.load=o(e,this.config.storage).then(()=>this)}get buffers(){return this.player.buffers}get output(){return this.player.output}start(e){let t=eB(this.group,"object"==typeof e?e:{note:e});return t?this.player.start(t):()=>void 0}stop(e){this.player.stop(e)}disconnect(){this.player.disconnect()}},e2=["preDelay","bandwidth","inputDiffusion1","inputDiffusion2","decay","decayDiffusion1","decayDiffusion2","damping","excursionRate","excursionDepth","wet","dry"],e3=new WeakMap,e5=class{constructor(e){eo(this,O,void 0),eo(this,z,void 0),eo(this,L,void 0),this.input=e.createGain(),eu(this,L,e.destination),eu(this,z,(function(e){return ed(this,null,function*(){let t=e3.get(e);if(!t){let n=new Blob(['"use strict";(()=>{var f=class extends AudioWorkletProcessor{_pDLength;_preDelay;_pDWrite;_lp1;_lp2;_lp3;_excPhase;_taps;_Delays;sampleRate;static get parameterDescriptors(){return[["preDelay",0,0,sampleRate-1,"k-rate"],["bandwidth",.9999,0,1,"k-rate"],["inputDiffusion1",.75,0,1,"k-rate"],["inputDiffusion2",.625,0,1,"k-rate"],["decay",.5,0,1,"k-rate"],["decayDiffusion1",.7,0,.999999,"k-rate"],["decayDiffusion2",.5,0,.999999,"k-rate"],["damping",.005,0,1,"k-rate"],["excursionRate",.5,0,2,"k-rate"],["excursionDepth",.7,0,2,"k-rate"],["wet",1,0,1,"k-rate"],["dry",0,0,1,"k-rate"]].map(e=>new Object({name:e[0],defaultValue:e[1],minValue:e[2],maxValue:e[3],automationRate:e[4]}))}constructor(e){super(),this.sampleRate=sampleRate,this._Delays=[],this._pDLength=sampleRate+(128-sampleRate%128),this._preDelay=new Float32Array(this._pDLength),this._pDWrite=0,this._lp1=0,this._lp2=0,this._lp3=0,this._excPhase=0,[.004771345,.003595309,.012734787,.009307483,.022579886,.149625349,.060481839,.1249958,.030509727,.141695508,.089244313,.106280031].forEach(a=>this.makeDelay(a,sampleRate)),this._taps=Int16Array.from([.008937872,.099929438,.064278754,.067067639,.066866033,.006283391,.035818689,.011861161,.121870905,.041262054,.08981553,.070931756,.011256342,.004065724],a=>Math.round(a*sampleRate))}makeDelay(e,a){let t=Math.round(e*a),s=2**Math.ceil(Math.log2(t));this._Delays.push([new Float32Array(s),t-1,0,s-1])}writeDelay(e,a){return this._Delays[e][0][this._Delays[e][1]]=a}readDelay(e){return this._Delays[e][0][this._Delays[e][2]]}readDelayAt(e,a){let t=this._Delays[e];return t[0][t[2]+a&t[3]]}readDelayCAt(e,a){let t=this._Delays[e],s=a-~~a,d=~~a+t[2]-1,r=t[3],D=t[0][d++&r],l=t[0][d++&r],h=t[0][d++&r],y=t[0][d&r],u=(3*(l-h)-D+y)/2,m=2*h+D-(5*l+y)/2,c=(h-D)/2;return((u*s+m)*s+c)*s+l}process(e,a,t){let s=~~t.preDelay[0],d=t.bandwidth[0],r=t.inputDiffusion1[0],D=t.inputDiffusion2[0],l=t.decay[0],h=t.decayDiffusion1[0],y=t.decayDiffusion2[0],u=1-t.damping[0],m=t.excursionRate[0]/sampleRate,c=t.excursionDepth[0]*sampleRate/1e3,w=t.wet[0]*.6,A=t.dry[0];if(e[0].length==2)for(let i=127;i>=0;i--)this._preDelay[this._pDWrite+i]=(e[0][0][i]+e[0][1][i])*.5,a[0][0][i]=e[0][0][i]*A,a[0][1][i]=e[0][1][i]*A;else if(e[0].length>0){this._preDelay.set(e[0][0],this._pDWrite);for(let i=127;i>=0;i--)a[0][0][i]=a[0][1][i]=e[0][0][i]*A}else this._preDelay.set(new Float32Array(128),this._pDWrite);let o=0;for(;o<128;){let i=0,b=0;this._lp1+=d*(this._preDelay[(this._pDLength+this._pDWrite-s+o)%this._pDLength]-this._lp1);let p=this.writeDelay(0,this._lp1-r*this.readDelay(0));p=this.writeDelay(1,r*(p-this.readDelay(1))+this.readDelay(0)),p=this.writeDelay(2,r*p+this.readDelay(1)-D*this.readDelay(2)),p=this.writeDelay(3,D*(p-this.readDelay(3))+this.readDelay(2));let k=D*p+this.readDelay(3),g=c*(1+Math.cos(this._excPhase*6.28)),x=c*(1+Math.sin(this._excPhase*6.2847)),_=this.writeDelay(4,k+l*this.readDelay(11)+h*this.readDelayCAt(4,g));this.writeDelay(5,this.readDelayCAt(4,g)-h*_),this._lp2+=u*(this.readDelay(5)-this._lp2),_=this.writeDelay(6,l*this._lp2-y*this.readDelay(6)),this.writeDelay(7,this.readDelay(6)+y*_),_=this.writeDelay(8,k+l*this.readDelay(7)+h*this.readDelayCAt(8,x)),this.writeDelay(9,this.readDelayCAt(8,x)-h*_),this._lp3+=u*(this.readDelay(9)-this._lp3),_=this.writeDelay(10,l*this._lp3-y*this.readDelay(10)),this.writeDelay(11,this.readDelay(10)+y*_),i=this.readDelayAt(9,this._taps[0])+this.readDelayAt(9,this._taps[1])-this.readDelayAt(10,this._taps[2])+this.readDelayAt(11,this._taps[3])-this.readDelayAt(5,this._taps[4])-this.readDelayAt(6,this._taps[5])-this.readDelayAt(7,this._taps[6]),b=this.readDelayAt(5,this._taps[7])+this.readDelayAt(5,this._taps[8])-this.readDelayAt(6,this._taps[9])+this.readDelayAt(7,this._taps[10])-this.readDelayAt(9,this._taps[11])-this.readDelayAt(10,this._taps[12])-this.readDelayAt(11,this._taps[13]),a[0][0][o]+=i*w,a[0][1][o]+=b*w,this._excPhase+=m,o++;for(let R=0,n=this._Delays[0];R<this._Delays.length;n=this._Delays[++R])n[1]=n[1]+1&n[3],n[2]=n[2]+1&n[3]}return this._pDWrite=(this._pDWrite+128)%this._pDLength,!0}};registerProcessor("DattorroReverb",f);})();'],{type:"application/javascript"}),s=URL.createObjectURL(n);t=e.audioWorklet.addModule(s),e3.set(e,t)}yield t;let n=new AudioWorkletNode(e,"DattorroReverb",{outputChannelCount:[2]});return n})})(e).then(e=>(this.input.connect(e),e.connect(er(this,L)),eu(this,O,e),this)))}get paramNames(){return e2}getParam(e){var t;return null==(t=er(this,O))?void 0:t.parameters.get("preDelay")}get isReady(){return void 0!==er(this,O)}ready(){return er(this,z)}connect(e){er(this,O)&&(er(this,O).disconnect(er(this,L)),er(this,O).connect(e)),eu(this,L,e)}};O=new WeakMap,z=new WeakMap,L=new WeakMap,new WeakMap;var e4=class{constructor(e,t={}){var n,s;this.seqNum=0,this.config={instrument:null!=(n=t.instrument)?n:"Arco",storage:null!=(s=t.storage)?s:ej},this.player=new eb(e,t),this.group=eT();let i=`https://smpldsnds.github.io/sfzinstruments-dsmolken-double-bass/d_smolken_rubner_bass_${{Arco:"arco",Pizzicato:"pizz",Switched:"switched"}[this.config.instrument]}.sfz`,l=eV(i,{buffers:this.player.buffers,group:this.group,urlFromSampleName:(e,t)=>{let n=e.replace("\\","/").replace(".wav",t);return`https://smpldsnds.github.io/sfzinstruments-dsmolken-double-bass/${n}`}});this.load=l(e,this.config.storage).then(()=>this)}get output(){return this.player.output}get buffers(){return this.player.buffers}get context(){return this.player.context}start(e){let t=eR(this.group,"object"==typeof e?e:{note:e},this.seqNum);this.seqNum++;let n=t.map(e=>this.player.start(e));return e=>n.forEach(t=>t(e))}stop(e){if(void 0==e){this.player.stop();return}let t="object"==typeof e?e:{stopId:e},n=eS(t.stopId);n&&(t.stopId=n,this.player.stop(t))}disconnect(){this.player.disconnect()}},e6=["MusyngKite","FluidR3_GM"],e7=["accordion","acoustic_bass","acoustic_grand_piano","acoustic_guitar_nylon","acoustic_guitar_steel","agogo","alto_sax","applause","bagpipe","banjo","baritone_sax","bassoon","bird_tweet","blown_bottle","brass_section","breath_noise","bright_acoustic_piano","celesta","cello","choir_aahs","church_organ","clarinet","clavinet","contrabass","distortion_guitar","drawbar_organ","dulcimer","electric_bass_finger","electric_bass_pick","electric_grand_piano","electric_guitar_clean","electric_guitar_jazz","electric_guitar_muted","electric_piano_1","electric_piano_2","english_horn","fiddle","flute","french_horn","fretless_bass","fx_1_rain","fx_2_soundtrack","fx_3_crystal","fx_4_atmosphere","fx_5_brightness","fx_6_goblins","fx_7_echoes","fx_8_scifi","glockenspiel","guitar_fret_noise","guitar_harmonics","gunshot","harmonica","harpsichord","helicopter","honkytonk_piano","kalimba","koto","lead_1_square","lead_2_sawtooth","lead_3_calliope","lead_4_chiff","lead_5_charang","lead_6_voice","lead_7_fifths","lead_8_bass__lead","marimba","melodic_tom","music_box","muted_trumpet","oboe","ocarina","orchestra_hit","orchestral_harp","overdriven_guitar","pad_1_new_age","pad_2_warm","pad_3_polysynth","pad_4_choir","pad_5_bowed","pad_6_metallic","pad_7_halo","pad_8_sweep","pan_flute","percussive_organ","piccolo","pizzicato_strings","recorder","reed_organ","reverse_cymbal","rock_organ","seashore","shakuhachi","shamisen","shanai","sitar","slap_bass_1","slap_bass_2","soprano_sax","steel_drums","string_ensemble_1","string_ensemble_2","synth_bass_1","synth_bass_2","synth_brass_1","synth_brass_2","synth_choir","synth_drum","synth_strings_1","synth_strings_2","taiko_drum","tango_accordion","telephone_ring","tenor_sax","timpani","tinkle_bell","tremolo_strings","trombone","trumpet","tuba","tubular_bells","vibraphone","viola","violin","voice_oohs","whistle","woodblock","xylophone"],e8=class{constructor(e,t){this.context=e,eo(this,V,void 0),this.config=function(e){var t,n,s,i;if(!e.instrument&&!e.instrumentUrl)throw Error("Soundfont: instrument or instrumentUrl is required");let l={kit:"MusyngKite",instrument:e.instrument,storage:null!=(t=e.storage)?t:ej,extraGain:null!=(n=e.extraGain)?n:5,loadLoopData:null!=(s=e.loadLoopData)&&s,loopDataUrl:e.loopDataUrl,instrumentUrl:null!=(i=e.instrumentUrl)?i:""};return l.instrument&&l.instrument.startsWith("http")&&(console.warn("Use 'instrumentUrl' instead of 'instrument' to load from a URL"),l.instrumentUrl=l.instrument,l.instrument=void 0),l.instrument&&!l.instrumentUrl&&(l.instrumentUrl=function(e,t){var n;let s=null!=(n=eP(["ogg","mp3"]))?n:"mp3";return`https://gleitz.github.io/midi-js-soundfonts/${t}/${e}-${s}.js`}(l.instrument,l.kit)),l.loadLoopData&&l.instrument&&!l.loopDataUrl&&(l.loopDataUrl=function(e,t){if(!e.startsWith("http"))return`https://goldst.dev/midi-js-soundfonts/${t}/${e}-loop.json`}(l.instrument,l.kit)),l}(t),this.player=new eb(e,t),this.group=eT(),eu(this,V,!1);let n=function(e,t,n,s){let i=function(e,t,n){return(s,i)=>ed(this,null,function*(){let l=yield(yield i.fetch(e)).text(),a=function(e){let t=e.indexOf("MIDI.Soundfont.");if(t<0)throw Error("Invalid MIDI.js Soundfont format");let n=e.indexOf("=",t)+2,s=e.lastIndexOf(",");return JSON.parse(e.slice(n,s)+"}")}(l),r=Object.keys(a);yield Promise.all(r.map(e=>ed(this,null,function*(){var i;let l=eS(e);if(!l)return;let r=function(e){let t=window.atob(e),n=t.length,s=new Uint8Array(n);for(let e=0;e<n;e++)s[e]=t.charCodeAt(e);return s.buffer}((i=a[e]).slice(i.indexOf(",")+1)),o=yield s.decodeAudioData(r);t[e]=o,n.regions.push({sampleName:e,midiPitch:l})}))),ez(n.regions)})}(e,n,s);return(e,n)=>ed(this,null,function*(){let[l,a]=yield Promise.all([i(e,n),function(e){return ed(this,null,function*(){if(e)try{let t=yield fetch(e);if(200!==t.status)return;let n=yield t.json(),s={};return Object.keys(n).forEach(e=>{let t=eS(e);if(t){let i=n[e];s[t]=[i[0]/41e3,i[1]/41e3]}}),s}catch(e){return}})}(t)]);return a&&s.regions.forEach(e=>{let t=a[e.midiPitch];t&&(null!=e.sample||(e.sample={}),e.sample.loop=!0,e.sample.loopStart=t[0],e.sample.loopEnd=t[1])}),!!a})}(this.config.instrumentUrl,this.config.loopDataUrl,this.player.buffers,this.group);this.load=n(e,this.config.storage).then(e=>(eu(this,V,e),this));let s=new GainNode(e,{gain:this.config.extraGain});this.player.output.addInsert(s)}get output(){return this.player.output}get hasLoops(){return er(this,V)}loaded(){return ed(this,null,function*(){return console.warn("deprecated: use load instead"),this.load})}disconnect(){this.player.disconnect()}start(e){let t=eB(this.group,"object"==typeof e?e:{note:e});return t?this.player.start(t):()=>void 0}stop(e){return this.player.stop(e)}};V=new WeakMap;var e9=class{constructor(e,t){this.context=e,eo(this,W),this.options=Object.assign({baseUrl:"https://danigb.github.io/samples/splendid-grand-piano",destination:e.destination,storage:ej,detune:0,volume:100,velocity:100,decayTime:.5},t),this.player=new eb(e,this.options);let n=function(e,t){var n;let s=null!=(n=eP(["ogg","m4a"]))?n:"ogg";return(n,i)=>ed(this,null,function*(){for(let l of te)yield Promise.all(l.samples.map(a=>ed(this,[a],function*([a,r]){let o=`${e}/${r}.${s}`,u=yield ex(n,o,t);u&&(i[l.name+a]=u)})))})}(this.options.baseUrl,this.options.storage);this.load=n(e,this.player.buffers).then(()=>this)}get output(){return this.player.output}get buffers(){return this.player.buffers}loaded(){return ed(this,null,function*(){return console.warn("deprecated: use load instead"),this.load})}start(e){var t,n;let s="object"==typeof e?ei({},e):{note:e},i=ec(this,W,U).call(this,s);return i?(s.note=i[0],s.stopId=null!=(t=s.stopId)?t:i[1],s.detune=i[2]+(null!=(n=s.detune)?n:this.options.detune),this.player.start(s)):()=>void 0}stop(e){return this.player.stop(e)}};W=new WeakSet,U=function(e){var t;let n=eS(e.note);if(!n)return;let s=null!=(t=e.velocity)?t:this.options.velocity,i=te.findIndex(e=>s>=e.vel_range[0]&&s<=e.vel_range[1]),l=te[i];if(l)return function(e,t,n){let s=0;for(;void 0===n[e+(t+s)]&&s<128;)s=s>0?-s:-s+1;return 127===s?[e+t,t,0]:[e+(t+s),t,-(100*s)]}(l.name,n,this.player.buffers)};var te=[{name:"PPP",vel_range:[1,40],cutoff:1e3,samples:[[23,"PP-B-1"],[27,"PP-D#0"],[29,"PP-F0"],[31,"PP-G0"],[33,"PP-A0"],[35,"PP-B0"],[37,"PP-C#1"],[38,"PP-D1"],[40,"PP-E1"],[41,"PP-F1"],[43,"PP-G1"],[45,"PP-A1"],[47,"PP-B1"],[48,"PP-C2"],[50,"PP-D2"],[52,"PP-E2"],[53,"PP-F2"],[55,"PP-G2"],[56,"PP-G#2"],[57,"PP-A2"],[58,"PP-A#2"],[59,"PP-B2"],[60,"PP-C3"],[62,"PP-D3"],[64,"PP-E3"],[65,"PP-F3"],[67,"PP-G3"],[69,"PP-A3"],[71,"PP-B3"],[72,"PP-C4"],[74,"PP-D4"],[76,"PP-E4"],[77,"PP-F4"],[79,"PP-G4"],[80,"PP-G#4"],[81,"PP-A4"],[82,"PP-A#4"],[83,"PP-B4"],[85,"PP-C#5"],[86,"PP-D5"],[87,"PP-D#5"],[89,"PP-F5"],[90,"PP-F#5"],[91,"PP-G5"],[92,"PP-G#5"],[93,"PP-A5"],[94,"PP-A#5"],[95,"PP-B5"],[96,"PP-C6"],[97,"PP-C#6"],[98,"PP-D6"],[99,"PP-D#6"],[100,"PP-E6"],[101,"PP-F6"],[102,"PP-F#6"],[103,"PP-G6"],[104,"PP-G#6"],[105,"PP-A6"],[106,"PP-A#6"],[107,"PP-B6"],[108,"PP-C7"]]},{name:"PP",vel_range:[41,67],samples:[[23,"PP-B-1"],[27,"PP-D#0"],[29,"PP-F0"],[31,"PP-G0"],[33,"PP-A0"],[35,"PP-B0"],[37,"PP-C#1"],[38,"PP-D1"],[40,"PP-E1"],[41,"PP-F1"],[43,"PP-G1"],[45,"PP-A1"],[47,"PP-B1"],[48,"PP-C2"],[50,"PP-D2"],[52,"PP-E2"],[53,"PP-F2"],[55,"PP-G2"],[56,"PP-G#2"],[57,"PP-A2"],[58,"PP-A#2"],[59,"PP-B2"],[60,"PP-C3"],[62,"PP-D3"],[64,"PP-E3"],[65,"PP-F3"],[67,"PP-G3"],[69,"PP-A3"],[71,"PP-B3"],[72,"PP-C4"],[74,"PP-D4"],[76,"PP-E4"],[77,"PP-F4"],[79,"PP-G4"],[80,"PP-G#4"],[81,"PP-A4"],[82,"PP-A#4"],[83,"PP-B4"],[85,"PP-C#5"],[86,"PP-D5"],[87,"PP-D#5"],[89,"PP-F5"],[90,"PP-F#5"],[91,"PP-G5"],[92,"PP-G#5"],[93,"PP-A5"],[94,"PP-A#5"],[95,"PP-B5"],[96,"PP-C6"],[97,"PP-C#6"],[98,"PP-D6"],[99,"PP-D#6"],[100,"PP-E6"],[101,"PP-F6"],[102,"PP-F#6"],[103,"PP-G6"],[104,"PP-G#6"],[105,"PP-A6"],[106,"PP-A#6"],[107,"PP-B6"],[108,"PP-C7"]]},{name:"MP",vel_range:[68,84],samples:[[23,"Mp-B-1"],[27,"Mp-D#0"],[29,"Mp-F0"],[31,"Mp-G0"],[33,"Mp-A0"],[35,"Mp-B0"],[37,"Mp-C#1"],[38,"Mp-D1"],[40,"Mp-E1"],[41,"Mp-F1"],[43,"Mp-G1"],[45,"Mp-A1"],[47,"Mp-B1"],[48,"Mp-C2"],[50,"Mp-D2"],[52,"Mp-E2"],[53,"Mp-F2"],[55,"Mp-G2"],[56,"Mp-G#2"],[57,"Mp-A2"],[58,"Mp-A#2"],[59,"Mp-B2"],[60,"Mp-C3"],[62,"Mp-D3"],[64,"Mp-E3"],[65,"Mp-F3"],[67,"Mp-G3"],[69,"Mp-A3"],[71,"Mp-B3"],[72,"Mp-C4"],[74,"Mp-D4"],[76,"Mp-E4"],[77,"Mp-F4"],[79,"Mp-G4"],[80,"Mp-G#4"],[81,"Mp-A4"],[82,"Mp-A#4"],[83,"Mp-B4"],[85,"Mp-C#5"],[86,"Mp-D5"],[87,"Mp-D#5"],[88,"Mp-E5"],[89,"Mp-F5"],[90,"Mp-F#5"],[91,"Mp-G5"],[92,"Mp-G#5"],[93,"Mp-A5"],[94,"Mp-A#5"],[95,"Mp-B5"],[96,"Mp-C6"],[97,"Mp-C#6"],[98,"Mp-D6"],[99,"Mp-D#6"],[100,"PP-E6"],[101,"Mp-F6"],[102,"Mp-F#6"],[103,"Mp-G6"],[104,"Mp-G#6"],[105,"Mp-A6"],[106,"Mp-A#6"],[107,"PP-B6"],[108,"PP-C7"]]},{name:"MF",vel_range:[85,100],samples:[[23,"Mf-B-1"],[27,"Mf-D#0"],[29,"Mf-F0"],[31,"Mf-G0"],[33,"Mf-A0"],[35,"Mf-B0"],[37,"Mf-C#1"],[38,"Mf-D1"],[40,"Mf-E1"],[41,"Mf-F1"],[43,"Mf-G1"],[45,"Mf-A1"],[47,"Mf-B1"],[48,"Mf-C2"],[50,"Mf-D2"],[52,"Mf-E2"],[53,"Mf-F2"],[55,"Mf-G2"],[56,"Mf-G#2"],[57,"Mf-A2"],[58,"Mf-A#2"],[59,"Mf-B2"],[60,"Mf-C3"],[62,"Mf-D3"],[64,"Mf-E3"],[65,"Mf-F3"],[67,"Mf-G3"],[69,"Mf-A3"],[71,"Mf-B3"],[72,"Mf-C4"],[74,"Mf-D4"],[76,"Mf-E4"],[77,"Mf-F4"],[79,"Mf-G4"],[80,"Mf-G#4"],[81,"Mf-A4"],[82,"Mf-A#4"],[83,"Mf-B4"],[85,"Mf-C#5"],[86,"Mf-D5"],[87,"Mf-D#5"],[88,"Mf-E5"],[89,"Mf-F5"],[90,"Mf-F#5"],[91,"Mf-G5"],[92,"Mf-G#5"],[93,"Mf-A5"],[94,"Mf-A#5"],[95,"Mf-B5"],[96,"Mf-C6"],[97,"Mf-C#6"],[98,"Mf-D6"],[99,"Mf-D#6"],[100,"Mf-E6"],[101,"Mf-F6"],[102,"Mf-F#6"],[103,"Mf-G6"],[104,"Mf-G#6"],[105,"Mf-A6"],[106,"Mf-A#6"],[107,"Mf-B6"],[108,"PP-C7"]]},{name:"FF",vel_range:[101,127],samples:[[23,"FF-B-1"],[27,"FF-D#0"],[29,"FF-F0"],[31,"FF-G0"],[33,"FF-A0"],[35,"FF-B0"],[37,"FF-C#1"],[38,"FF-D1"],[40,"FF-E1"],[41,"FF-F1"],[43,"FF-G1"],[45,"FF-A1"],[47,"FF-B1"],[48,"FF-C2"],[50,"FF-D2"],[52,"FF-E2"],[53,"FF-F2"],[55,"FF-G2"],[56,"FF-G#2"],[57,"FF-A2"],[58,"FF-A#2"],[59,"FF-B2"],[60,"FF-C3"],[62,"FF-D3"],[64,"FF-E3"],[65,"FF-F3"],[67,"FF-G3"],[69,"FF-A3"],[71,"FF-B3"],[72,"FF-C4"],[74,"FF-D4"],[76,"FF-E4"],[77,"FF-F4"],[79,"FF-G4"],[80,"FF-G#4"],[81,"FF-A4"],[82,"FF-A#4"],[83,"FF-B4"],[85,"FF-C#5"],[86,"FF-D5"],[88,"FF-E5"],[89,"FF-F5"],[91,"FF-G5"],[93,"FF-A5"],[95,"Mf-B5"],[96,"Mf-C6"],[97,"Mf-C#6"],[98,"Mf-D6"],[99,"Mf-D#6"],[100,"Mf-E6"],[102,"Mf-F#6"],[103,"Mf-G6"],[104,"Mf-G#6"],[105,"Mf-A6"],[106,"Mf-A#6"],[107,"Mf-B6"],[108,"Mf-C7"]]}];function tt(){return(0,Z.useState)("init")}function tn(e){let{status:t,onClick:n}=e;return"init"===t?(0,H.jsx)("button",{className:"text-rose-700 bg-zinc-900 px-2 rounded",onClick:n,children:"Load"}):"ready"===t?(0,H.jsx)("div",{className:"text-teal-600",children:"Ready"}):"loading"===t?(0,H.jsx)("div",{className:"text-gray-500",children:"Loading..."}):(0,H.jsx)("div",{className:"text-red-700",children:"Error loading"})}function ts(e){let{className:t}=e,[n,l]=tt(),[a,r]=(0,Z.useState)(eN()[0]),[o,u]=(0,Z.useState)(void 0),[c,d]=(0,Z.useState)(0),[p,h]=(0,Z.useState)(100);function m(e){l("loading"),null!=s||(s=new window.AudioContext),null!=i||(i=new e5(s));let t=new eC(s,{instrument:e});t.output.addEffect("reverb",i,c),t.load.then(()=>{l("ready"),u(t)}).catch(e=>{l("error"),console.error("Instrument error",e)})}return(0,H.jsxs)("div",{className:t,children:[(0,H.jsxs)("div",{className:"flex gap-2 items-end mb-2",children:[(0,H.jsx)("h1",{className:"text-3xl",children:"DrumMachine"}),(0,H.jsx)(tn,{status:n,onClick:()=>{m(a)}})]}),(0,H.jsxs)("div",{className:"ready"!==n?"opacity-30 no-select":"no-select",children:[(0,H.jsxs)("div",{className:"flex gap-4 mb-2",children:[(0,H.jsx)("select",{className:"appearance-none bg-zinc-700 text-zinc-200 rounded border border-gray-400 py-2 px-3 leading-tight focus:outline-none focus:border-blue-500",value:a,onChange:e=>{let t=e.target.value;t!==a&&(r(t),m(t))},children:eN().map(e=>(0,H.jsx)("option",{value:e,children:e},e))}),(0,H.jsx)("div",{children:"Vol:"}),(0,H.jsx)("input",{type:"range",min:0,max:127,step:1,value:p,onChange:e=>{let t=e.target.valueAsNumber;null==o||o.output.setVolume(t),h(t)}}),(0,H.jsx)("div",{children:"Reverb:"}),(0,H.jsx)("input",{type:"range",min:0,max:1,step:.001,value:c,onChange:e=>{let t=e.target.valueAsNumber;null==o||o.output.sendEffect("reverb",t),d(t)}})]}),(0,H.jsx)("div",{className:"grid grid-cols-6 gap-1",children:null==o?void 0:o.sampleNames.map(e=>(0,H.jsxs)("div",{className:"bg-zinc-900 rounded px-2 pb-2",children:[(0,H.jsx)("div",{className:"flex",children:(0,H.jsx)("button",{className:"text-left flex-grow",onClick:()=>{null==o||o.start({note:e,detune:50*(Math.random()-.5)})},children:e})}),(0,H.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:null==o?void 0:o.getVariations(e).map(e=>(0,H.jsx)("button",{className:"bg-zinc-600 w-4 h-4 rounded",onMouseDown:()=>{null==o||o.start({note:e})}},e))})]},e))})]})]})}function ti(){return null!=l||(l=new AudioContext),l}var tl=n(2209);function ta(e){let{instrument:t}=e,n=(0,Z.useRef)(null),[s,i]=(0,Z.useState)([]),[l,a]=(0,Z.useState)(""),[r,o]=(0,Z.useState)(),[u,c]=(0,Z.useState)("");(0,Z.useEffect)(()=>{void 0!==window.navigator&&void 0!==navigator.requestMIDIAccess&&tl.u5.enable().then(()=>{let e=tl.u5.inputs.map(e=>e.name);i(e)})},[]),n.current=null!=t?t:null;let d=void 0!==r;function p(){null==r||r.forEach(e=>e.remove()),o(void 0)}function h(e){let t=tl.u5.inputs.find(t=>t.name===e);if(!t){a("");return}a(e);let s=t.addListener("noteon",e=>{var t;let s={note:e.note.number,velocity:e.rawVelocity};null===(t=n.current)||void 0===t||t.start(s),c("".concat(s.note," (").concat(s.velocity,")"))}),i=t.addListener("noteoff",e=>{var t;null===(t=n.current)||void 0===t||t.stop({stopId:e.note.number}),c("")});o([...Array.isArray(s)?s:[s],...Array.isArray(i)?i:[i]])}return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)("button",{className:"px-1 rounded "+(d?"bg-emerald-600":"bg-zinc-700"),onClick:()=>{d?p():h(l)},children:"MIDI"}),(0,H.jsxs)("select",{className:"appearance-none bg-zinc-700 text-zinc-200 rounded border border-gray-400 py-2 px-3 leading-tight focus:outline-none focus:border-blue-500 py-[2px]",value:l,onChange:e=>{let t=e.target.value;d&&p(),t&&h(t)},children:[(0,H.jsx)("option",{value:"",children:"Select MIDI device"}),s.map(e=>(0,H.jsx)("option",{value:e,children:e},e))]}),(0,H.jsx)("div",{className:"opacity-50",children:u})]})}var tr=n(9792);let to=e=>[0,1,2,3,4,5,6,7,8,9,10,11].map(t=>t+e),tu=e=>[1,3,6,8,10].includes(e%12);function tc(e){let{className:t,borderColor:n="border-blue-700",onPress:s,onRelease:i}=e,[l,a]=(0,Z.useState)(100),[r,o]=(0,Z.useState)(60),[u,c]=(0,Z.useState)(!1),d=e=>!1;return(0,H.jsxs)("div",{className:t,children:[(0,H.jsx)("div",{className:"piano-container border-t-8 ".concat(n),children:[...to(r),...to(r+12)].map(e=>tu(e)?(0,H.jsx)("div",{className:"accidental-key__wrapper",children:(0,H.jsx)("button",{className:"accidental-key ".concat(d(e)?"accidental-key--playing":""),onMouseDown:()=>s({note:e,velocity:l}),onMouseUp:()=>{!u&&i&&i(e)},children:(0,H.jsx)("div",{className:"text"})})},e):(0,H.jsx)("button",{className:"natural-key ".concat(d(e)?"natural-key--playing":""),onMouseDown:()=>s({note:e,velocity:l}),onMouseUp:()=>{!u&&i&&i(e)},children:(0,H.jsx)("div",{className:"text"})},e))}),(0,H.jsxs)("div",{className:"flex gap-1 items-center mt-1",children:[(0,H.jsxs)("div",{children:["Octave: ",r,"-",r+12+11]}),(0,H.jsx)("button",{className:"bg-zinc-900 px-1 rounded",onClick:()=>{o(r-12)},children:"-"}),(0,H.jsx)("button",{className:"bg-zinc-900 px-1 rounded",onClick:()=>{o(r+12)},children:"+"}),(0,H.jsxs)("div",{className:"ml-3",children:["Velocity: ",l]}),(0,H.jsx)("input",{type:"range",min:0,max:127,value:l,onChange:e=>a(e.target.valueAsNumber)}),(0,H.jsx)("input",{className:"ml-3",type:"checkbox",checked:u,onChange:e=>c(e.target.checked)}),(0,H.jsx)("div",{className:"",children:"Sustain"}),(0,H.jsx)("button",{className:"bg-zinc-900 px-1 rounded",onClick:()=>{let e=tr.Ci.degrees("C4 major"),t=tr.e6.numeric([1,8,1]).map(e).map(tr.jC.midi);t.map((e,t)=>s({note:null!=e?e:0,velocity:Math.floor(60+40*Math.random()),time:.25*t,duration:.05}))},children:"Test"})]})]})}let td=Object.keys(eE);function tp(e){let{className:t}=e,[n,s]=(0,Z.useState)(void 0),[i,l]=(0,Z.useState)("CP80"),[r,o]=tt(),[u,c]=(0,Z.useState)(0),[d,p]=(0,Z.useState)(0),[h,m]=(0,Z.useState)(100);function f(e){n&&n.disconnect(),o("loading");let t=ti();null!=a||(a=new e5(t));let i=new eG(t,{instrument:e,volume:h});i.output.addEffect("reverb",a,u),s(i),i.load.then(()=>{o("ready")})}return(0,H.jsxs)("div",{className:t,children:[(0,H.jsxs)("div",{className:"flex gap-2 items-end mb-2",children:[(0,H.jsx)("h1",{className:"text-3xl",children:"Electric Piano"}),(0,H.jsx)(tn,{status:r,onClick:()=>f(i)}),(0,H.jsx)(ta,{instrument:n})]}),(0,H.jsx)("div",{}),(0,H.jsxs)("div",{className:"ready"!==r?"opacity-30":"",children:[(0,H.jsxs)("div",{className:"flex gap-4 mb-2 no-select",children:[(0,H.jsx)("select",{className:"appearance-none bg-zinc-700 text-zinc-200 rounded border border-gray-400 py-2 px-3 leading-tight focus:outline-none focus:border-blue-500",value:i,onChange:e=>{let t=e.target.value;f(t),l(t)},children:td.map(e=>(0,H.jsx)("option",{value:e,children:e},e))}),(0,H.jsx)("button",{className:"bg-zinc-700 rounded px-3 py-0.5 shadow",onClick:()=>{null==n||n.stop()},children:"Stop all"})]}),(0,H.jsxs)("div",{className:"flex gap-4 mb-2 no-select",children:[(0,H.jsx)("div",{children:"Volume:"}),(0,H.jsx)("input",{type:"range",min:0,max:127,step:1,value:h,onChange:e=>{let t=e.target.valueAsNumber;null==n||n.output.setVolume(t),m(t)}}),(0,H.jsx)("div",{children:"Tremolo:"}),(0,H.jsx)("input",{type:"range",min:0,max:127,step:1,value:d,onChange:e=>{let t=e.target.valueAsNumber;null==n||n.tremolo.level(t),p(t)}}),(0,H.jsx)("div",{children:"Reverb:"}),(0,H.jsx)("input",{type:"range",min:0,max:1,step:.001,value:u,onChange:e=>{let t=e.target.valueAsNumber;null==n||n.output.sendEffect("reverb",t),c(t)}})]}),(0,H.jsx)(tc,{borderColor:"border-rose-700",onPress:e=>{var t;n&&(e.time=(null!==(t=e.time)&&void 0!==t?t:0)+n.context.currentTime,n.start(e))},onRelease:e=>{null==n||n.stop({stopId:e})}})]})]})}let th=Object.keys(eQ);function tm(e){let{className:t}=e,[n,s]=(0,Z.useState)(void 0),[i,l]=(0,Z.useState)(th[0]),[a,o]=tt(),[u,c]=(0,Z.useState)(0),[d,p]=(0,Z.useState)(100);function h(e){n&&n.disconnect(),o("loading");let t=ti();null!=r||(r=new e5(t));let i=new eY(t,{instrument:e,volume:d});i.output.addEffect("reverb",r,u),s(i),i.load.then(()=>{o("ready")})}return(0,H.jsxs)("div",{className:t,children:[(0,H.jsxs)("div",{className:"flex gap-2 items-end mb-2",children:[(0,H.jsx)("h1",{className:"text-3xl",children:"Mallet"}),(0,H.jsx)(tn,{status:a,onClick:()=>h(i)}),(0,H.jsx)(ta,{instrument:n})]}),(0,H.jsx)("div",{}),(0,H.jsxs)("div",{className:"ready"!==a?"opacity-30":"",children:[(0,H.jsxs)("div",{className:"flex gap-4 mb-2 no-select",children:[(0,H.jsx)("select",{className:"appearance-none bg-zinc-700 text-zinc-200 rounded border border-gray-400 py-2 px-3 leading-tight focus:outline-none focus:border-blue-500",value:i,onChange:e=>{let t=e.target.value;h(t),l(t)},children:th.map(e=>(0,H.jsx)("option",{value:e,children:e},e))}),(0,H.jsx)("button",{className:"bg-zinc-700 rounded px-3 py-0.5 shadow",onClick:()=>{null==n||n.stop()},children:"Stop all"})]}),(0,H.jsxs)("div",{className:"flex gap-4 mb-2 no-select",children:[(0,H.jsx)("div",{children:"Volume:"}),(0,H.jsx)("input",{type:"range",min:0,max:127,step:1,value:d,onChange:e=>{let t=e.target.valueAsNumber;null==n||n.output.setVolume(t),p(t)}}),(0,H.jsx)("div",{children:"Reverb:"}),(0,H.jsx)("input",{type:"range",min:0,max:1,step:.001,value:u,onChange:e=>{let t=e.target.valueAsNumber;null==n||n.output.sendEffect("reverb",t),c(t)}})]}),(0,H.jsx)(tc,{borderColor:"border-rose-700",onPress:e=>{var t;n&&(e.time=(null!==(t=e.time)&&void 0!==t?t:0)+n.context.currentTime,n.start(e))},onRelease:e=>{null==n||n.stop({stopId:e})}})]})]})}let tf=["300 STRINGS CELLO","300 STRINGS VIOLA","8VOICE CHOIR","BASSA+STRNGS","BOYS CHOIR","CHA CHA FLT","CHM CLARINET","CHMB 3 VLNS","CHMB ALTOSAX","CHMB FEMALE","CHMB MALE VC","CHMB TNR SAX","CHMB TRMBONE","CHMB TRUMPET","CHMBLN CELLO","CHMBLN FLUTE","CHMBLN OBOE","DIXIE+TRMBN","FOXTROT+SAX","HALFSP.BRASS","MIXED STRGS","MKII BRASS","MKII GUITAR","MKII ORGAN","MKII SAX","MKII VIBES","MKII VIOLINS","MOVE BS+STGS","STRGS+BRASS","TROMB+TRMPT","TRON 16VLNS","TRON CELLO","TRON FLUTE","TRON VIOLA"];function tg(e){let{className:t}=e,[n,s]=(0,Z.useState)(void 0),[i,l]=(0,Z.useState)(tf[0]),[a,r]=tt(),[u,c]=(0,Z.useState)(0),[d,p]=(0,Z.useState)(100);function h(e){n&&n.disconnect(),r("loading");let t=ti();null!=o||(o=new e5(t));let i=new e1(t,{instrument:e,volume:d});i.output.addEffect("reverb",o,u),s(i),i.load.then(()=>{r("ready")})}return(0,H.jsxs)("div",{className:t,children:[(0,H.jsxs)("div",{className:"flex gap-2 items-end mb-2",children:[(0,H.jsx)("h1",{className:"text-3xl",children:"Mellotron"}),(0,H.jsx)(tn,{status:a,onClick:()=>h(i)}),(0,H.jsx)(ta,{instrument:n})]}),(0,H.jsx)("div",{}),(0,H.jsxs)("div",{className:"ready"!==a?"opacity-30":"",children:[(0,H.jsxs)("div",{className:"flex gap-4 mb-2 no-select",children:[(0,H.jsx)("select",{className:"appearance-none bg-zinc-700 text-zinc-200 rounded border border-gray-400 py-2 px-3 leading-tight focus:outline-none focus:border-blue-500",value:i,onChange:e=>{let t=e.target.value;h(t),l(t)},children:tf.map(e=>(0,H.jsx)("option",{value:e,children:e},e))}),(0,H.jsx)("button",{className:"bg-zinc-700 rounded px-3 py-0.5 shadow",onClick:()=>{null==n||n.stop()},children:"Stop all"})]}),(0,H.jsxs)("div",{className:"flex gap-4 mb-2 no-select",children:[(0,H.jsx)("div",{children:"Volume:"}),(0,H.jsx)("input",{type:"range",min:0,max:127,step:1,value:d,onChange:e=>{let t=e.target.valueAsNumber;null==n||n.output.setVolume(t),p(t)}}),(0,H.jsx)("div",{children:"Reverb:"}),(0,H.jsx)("input",{type:"range",min:0,max:1,step:.001,value:u,onChange:e=>{let t=e.target.valueAsNumber;null==n||n.output.sendEffect("reverb",t),c(t)}})]}),(0,H.jsx)(tc,{borderColor:"border-rose-700",onPress:e=>{var t;n&&(e.time=(null!==(t=e.time)&&void 0!==t?t:0)+n.context.currentTime,n.start(e))},onRelease:e=>{null==n||n.stop({stopId:e})}})]})]})}let tv=["Pizzicato","Arco","Switched"];function ty(e){let{className:t}=e,[n,s]=(0,Z.useState)(void 0),[i,l]=(0,Z.useState)(tv[0]),[a,r]=tt(),[o,d]=(0,Z.useState)(0),[p,h]=(0,Z.useState)(100);function m(e){n&&n.disconnect(),r("loading");let t=ti();null!=u||(u=new e5(t)),null!=c||(c=new eM("smolken"));let i=new e4(t,{instrument:e,volume:p});i.output.addEffect("reverb",u,o),s(i),i.load.then(()=>{r("ready")})}return(0,H.jsxs)("div",{className:t,children:[(0,H.jsxs)("div",{className:"flex gap-2 items-end mb-2",children:[(0,H.jsx)("h1",{className:"text-3xl",children:"Smolken Double Bass"}),(0,H.jsx)(tn,{status:a,onClick:()=>m(i)}),(0,H.jsx)(ta,{instrument:n})]}),(0,H.jsx)("div",{}),(0,H.jsxs)("div",{className:"ready"!==a?"opacity-30":"",children:[(0,H.jsxs)("div",{className:"flex gap-4 mb-2 no-select",children:[(0,H.jsx)("select",{className:"appearance-none bg-zinc-700 text-zinc-200 rounded border border-gray-400 py-2 px-3 leading-tight focus:outline-none focus:border-blue-500",value:i,onChange:e=>{let t=e.target.value;m(t),l(t)},children:tv.map(e=>(0,H.jsx)("option",{value:e,children:e},e))}),(0,H.jsx)("button",{className:"bg-zinc-700 rounded px-3 py-0.5 shadow",onClick:()=>{null==n||n.stop()},children:"Stop all"})]}),(0,H.jsxs)("div",{className:"flex gap-4 mb-2 no-select",children:[(0,H.jsx)("div",{children:"Volume:"}),(0,H.jsx)("input",{type:"range",min:0,max:127,step:1,value:p,onChange:e=>{let t=e.target.valueAsNumber;null==n||n.output.setVolume(t),h(t)}}),(0,H.jsx)("div",{children:"Reverb:"}),(0,H.jsx)("input",{type:"range",min:0,max:1,step:.001,value:o,onChange:e=>{let t=e.target.valueAsNumber;null==n||n.output.sendEffect("reverb",t),d(t)}})]}),(0,H.jsx)(tc,{borderColor:"border-rose-700",onPress:e=>{var t;n&&(e.time=(null!==(t=e.time)&&void 0!==t?t:0)+n.context.currentTime,n.start(e))},onRelease:e=>{null==n||n.stop({stopId:e})}})]})]})}function tb(e){let{className:t}=e,[n,s]=tt(),[i,l]=(0,Z.useState)("disabled"),[a,r]=(0,Z.useState)("MusyngKite"),[o,u]=(0,Z.useState)("marimba"),[c,p]=(0,Z.useState)(void 0),[h,m]=(0,Z.useState)(0),[f,g]=(0,Z.useState)(100);function v(e,t){let n=ti();null!=d||(d=new e5(n));let i=new e8(n,{kit:e,instrument:t,loadLoopData:!0});i.output.addEffect("reverb",d,0),i.load.then(e=>{s("ready"),p(t=>(t&&t.disconnect(),e)),e.hasLoops&&l("loop")}).catch(e=>{s("error"),console.error("Instrument error",e)})}return(0,H.jsxs)("div",{className:t,children:[(0,H.jsxs)("div",{className:"flex gap-2 items-end mb-2",children:[(0,H.jsx)("h1",{className:"text-3xl",children:"Soundfont"}),(0,H.jsx)(tn,{status:n,onClick:()=>{v(a,o)}}),(0,H.jsx)(ta,{instrument:{start:e=>{c&&c.start({...e,loop:"loop"===i})},stop:e=>{null==c||c.stop(e)}}})]}),(0,H.jsxs)("div",{className:"ready"!==n?"opacity-30 no-select":"no-select",children:[(0,H.jsxs)("div",{className:"flex items-center gap-4 mb-2",children:[(0,H.jsx)("select",{className:"appearance-none bg-zinc-700 text-zinc-200 rounded border border-gray-400 py-2 px-3 leading-tight focus:outline-none focus:border-blue-500",value:a,onChange:e=>{let t=e.target.value;v(t,o),r(t)},children:e6.map(e=>(0,H.jsx)("option",{value:e,children:e},e))}),(0,H.jsx)("select",{className:"appearance-none bg-zinc-700 text-zinc-200 rounded border border-gray-400 py-2 px-3 leading-tight focus:outline-none focus:border-blue-500",value:o,onChange:e=>{let t=e.target.value;v(a,t),u(t)},children:e7.map(e=>(0,H.jsx)("option",{value:e,children:e},e))}),(0,H.jsx)("button",{className:"bg-zinc-700 rounded px-3 py-0.5 shadow",onClick:()=>{null==c||c.stop()},children:"Stop all"}),(0,H.jsxs)("label",{"aria-disabled":"disabled"===i,className:"flex gap-2 ".concat("disabled"===i?"opacity-50":""),htmlFor:"loop",children:[(0,H.jsx)("input",{disabled:"disabled"===i,checked:"loop"===i,onChange:()=>{l(e=>"no-loop"===e?"loop":"no-loop")},type:"checkbox",id:"loop"}),"Loop"]})]}),(0,H.jsxs)("div",{className:"flex gap-4 mb-2",children:[(0,H.jsx)("div",{children:"Volume:"}),(0,H.jsx)("input",{type:"range",min:0,max:127,step:1,value:f,onChange:e=>{let t=e.target.valueAsNumber;null==c||c.output.setVolume(t),g(t)}}),(0,H.jsx)("div",{children:"Reverb:"}),(0,H.jsx)("input",{type:"range",min:0,max:1,step:.001,value:h,onChange:e=>{let t=e.target.valueAsNumber;null==c||c.output.sendEffect("reverb",t),m(t)}})]}),(0,H.jsx)(tc,{borderColor:"border-teal-600",onPress:e=>{var t;c&&c.start({...e,time:(null!==(t=e.time)&&void 0!==t?t:0)+c.context.currentTime,loop:"loop"===i})},onRelease:e=>{null==c||c.stop({stopId:e})}})]})]})}let tx=[];function tP(e){let{className:t}=e,[n,s]=(0,Z.useState)(void 0),[i,l]=(0,Z.useState)(tx[0]),[a,r]=tt(),[o,u]=(0,Z.useState)(0),[c,d]=(0,Z.useState)(100);function m(e){n&&n.disconnect(),r("loading");let t=ti();null!=p||(p=new e5(t)),null!=h||(h=new eM("smolken"));let i=new eJ(t,{instrument:e,volume:c});i.output.addEffect("reverb",p,o),s(i),i.load.then(()=>{r("ready")})}return(0,Z.useEffect)(()=>{(function(){return ed(this,null,function*(){return eK.length?eK:eK=yield fetch(eZ+"sfz_files.json").then(e=>e.json())})})().then(e=>{tx=e,l(e[0])})},[]),(0,H.jsxs)("div",{className:t,children:[(0,H.jsxs)("div",{className:"flex gap-2 items-end mb-2",children:[(0,H.jsxs)("div",{className:"flex flex-col",children:[(0,H.jsx)("h1",{className:"text-3xl",children:"Versilian "}),(0,H.jsx)("h2",{children:"Versilian Community Sample Library"})]}),(0,H.jsx)("div",{children:"(experimental)"}),(0,H.jsx)(tn,{status:a,onClick:()=>m(i)}),(0,H.jsx)(ta,{instrument:n})]}),(0,H.jsx)("div",{}),(0,H.jsxs)("div",{className:"ready"!==a?"opacity-30":"",children:[(0,H.jsxs)("div",{className:"flex gap-4 mb-2 no-select",children:[(0,H.jsx)("select",{className:"appearance-none bg-zinc-700 text-zinc-200 rounded border border-gray-400 py-2 px-3 leading-tight focus:outline-none focus:border-blue-500",value:i,onChange:e=>{let t=e.target.value;m(t),l(t)},children:tx.map(e=>(0,H.jsx)("option",{value:e,children:e},e))}),(0,H.jsx)("button",{className:"bg-zinc-700 rounded px-3 py-0.5 shadow",onClick:()=>{null==n||n.stop()},children:"Stop all"})]}),(0,H.jsxs)("div",{className:"flex gap-4 mb-2 no-select",children:[(0,H.jsx)("div",{children:"Volume:"}),(0,H.jsx)("input",{type:"range",min:0,max:127,step:1,value:c,onChange:e=>{let t=e.target.valueAsNumber;null==n||n.output.setVolume(t),d(t)}}),(0,H.jsx)("div",{children:"Reverb:"}),(0,H.jsx)("input",{type:"range",min:0,max:1,step:.001,value:o,onChange:e=>{let t=e.target.valueAsNumber;null==n||n.output.sendEffect("reverb",t),u(t)}})]}),(0,H.jsx)(tc,{borderColor:"border-rose-700",onPress:e=>{var t;n&&(e.time=(null!==(t=e.time)&&void 0!==t?t:0)+n.context.currentTime,n.start(e))},onRelease:e=>{null==n||n.stop({stopId:e})}})]})]})}function t_(e){let{className:t}=e,[n,s]=(0,Z.useState)(void 0),[i,l]=tt(),[a,r]=(0,Z.useState)(0),[o,u]=(0,Z.useState)(100);return(0,H.jsxs)("div",{className:t,children:[(0,H.jsxs)("div",{className:"flex gap-2 items-end mb-2",children:[(0,H.jsx)("h1",{className:"text-3xl",children:"Piano"}),(0,H.jsx)(tn,{status:i,onClick:function(){if(n)return;l("loading");let e=ti();null!=m||(m=new e5(e)),null!=f||(f=new eM);let t=new e9(e,{volume:o,storage:f});t.output.addEffect("reverb",m,a),s(t),t.load.then(()=>{l("ready")})}}),(0,H.jsx)(ta,{instrument:n})]}),(0,H.jsx)("div",{}),(0,H.jsxs)("div",{className:"ready"!==i?"opacity-30":"",children:[(0,H.jsx)("div",{className:"flex gap-4 mb-2 no-select",children:(0,H.jsx)("button",{className:"bg-zinc-700 rounded px-3 py-0.5 shadow",onClick:()=>{null==n||n.stop()},children:"Stop all"})}),(0,H.jsxs)("div",{className:"flex gap-4 mb-2 no-select",children:[(0,H.jsx)("div",{children:"Volume:"}),(0,H.jsx)("input",{type:"range",min:0,max:128,step:1,value:o,onChange:e=>{let t=e.target.valueAsNumber;null==n||n.output.setVolume(t),u(t)}}),(0,H.jsx)("div",{children:"Reverb:"}),(0,H.jsx)("input",{type:"range",min:0,max:1,step:.001,value:a,onChange:e=>{let t=e.target.valueAsNumber;null==n||n.output.sendEffect("reverb",t),r(t)}})]}),(0,H.jsx)(tc,{borderColor:"border-rose-700",onPress:e=>{var t;n&&(e.time=(null!==(t=e.time)&&void 0!==t?t:0)+n.context.currentTime,n.start(e))},onRelease:e=>{null==n||n.stop({stopId:e})}})]})]})}function tj(){return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(K(),{children:[(0,H.jsx)("title",{children:"smplr"}),(0,H.jsx)("meta",{name:"description",content:"Plug and play web instruments"}),(0,H.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),(0,H.jsxs)("main",{className:"max-w-4xl mx-auto my-20 p-4"+q().className,children:[(0,H.jsxs)("div",{className:"flex items-end mb-16",children:[(0,H.jsx)("h1",{className:"text-6xl font-bold",children:"smplr"}),(0,H.jsx)("div",{children:"0.10.0"})]}),(0,H.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,H.jsx)(t_,{}),(0,H.jsx)(tb,{}),(0,H.jsx)(tp,{}),(0,H.jsx)(tm,{}),(0,H.jsx)(ts,{}),(0,H.jsx)(tg,{}),(0,H.jsx)(ty,{}),(0,H.jsx)(tP,{})]})]})]})}}},function(e){e.O(0,[643,958,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);