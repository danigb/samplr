(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[182],{2768:function(e){var t;window,t=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,(function(t){return e[t]}).bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s="./src/index.ts")}({"./src/chunk.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"SF2Chunk",function(){return f});var n=r("./src/riff/index.ts"),o=r("./src/constants.ts"),i=r("./src/chunks/index.ts");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var f=function(e){var t,r;function f(e){var t,r,n,o,i;return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,f),t=(r=a(f).call(this,e.id,e.length,e.buffer,e.subChunks))&&("object"===s(r)||"function"==typeof r)?r:l(this),n=l(l(t)),i=void 0,(o="subChunks")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i,t.subChunks=e.subChunks.map(function(e){return new f(e)}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(f,n.RIFFChunk),t=[{key:"getMetaData",value:function(){if("LIST"!==this.id)throw new n.ParseError("Unexpected chunk ID","'LIST'","'".concat(this.id,"'"));var e=this.subChunks.reduce(function(e,t){if("ifil"===t.id||"iver"===t.id){if(t.length!==o.SF_VERSION_LENGTH)throw new n.ParseError("Invalid size for the '".concat(t.id,"' sub-chunk"));e[t.id]="".concat(t.getInt16(),".").concat(t.getInt16(2))}else e[t.id]=t.getString();return e},{});if(!e.ifil)throw new n.ParseError("Missing required 'ifil' sub-chunk");if(!e.INAM)throw new n.ParseError("Missing required 'INAM' sub-chunk");return{version:e.ifil,soundEngine:e.isng||"EMU8000",name:e.INAM,rom:e.irom,romVersion:e.iver,creationDate:e.ICRD,author:e.IENG,product:e.IPRD,copyright:e.ICOP,comments:e.ICMT,createdBy:e.ISFT}}},{key:"getSampleData",value:function(){if("LIST"!==this.id)throw new n.ParseError("Unexpected chunk ID","'LIST'","'".concat(this.id,"'"));var e=this.subChunks[0];if("smpl"!==e.id)throw new n.ParseError("Invalid chunk signature","'smpl'","'".concat(e.id,"'"));return e.buffer}},{key:"getPresetData",value:function(){if("LIST"!==this.id)throw new n.ParseError("Unexpected chunk ID","'LIST'","'".concat(this.id,"'"));return{presetHeaders:Object(i.getPresetHeaders)(this.subChunks[0]),presetZones:Object(i.getZones)(this.subChunks[1],"pbag"),presetModulators:Object(i.getModulators)(this.subChunks[2],"pmod"),presetGenerators:Object(i.getGenerators)(this.subChunks[3],"pgen"),instrumentHeaders:Object(i.getInstrumentHeaders)(this.subChunks[4]),instrumentZones:Object(i.getZones)(this.subChunks[5],"ibag"),instrumentModulators:Object(i.getModulators)(this.subChunks[6],"imod"),instrumentGenerators:Object(i.getGenerators)(this.subChunks[7],"igen"),sampleHeaders:Object(i.getSampleHeaders)(this.subChunks[8])}}}],u(f.prototype,t),r&&u(f,r),f}()},"./src/chunks/generators.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"getGenerators",function(){return c});var n=r("./src/riff/index.ts"),o=r("./src/types/index.ts"),i=r("./src/constants.ts"),s=[o.GeneratorType.StartAddrsOffset,o.GeneratorType.EndAddrsOffset,o.GeneratorType.StartLoopAddrsOffset,o.GeneratorType.EndLoopAddrsOffset,o.GeneratorType.StartAddrsCoarseOffset,o.GeneratorType.EndAddrsCoarseOffset,o.GeneratorType.StartLoopAddrsCoarseOffset,o.GeneratorType.KeyNum,o.GeneratorType.Velocity,o.GeneratorType.EndLoopAddrsCoarseOffset,o.GeneratorType.SampleModes,o.GeneratorType.ExclusiveClass,o.GeneratorType.OverridingRootKey],u=[o.GeneratorType.Unused1,o.GeneratorType.Unused2,o.GeneratorType.Unused3,o.GeneratorType.Unused4,o.GeneratorType.Reserved1,o.GeneratorType.Reserved2,o.GeneratorType.Reserved3],a=[o.GeneratorType.KeyRange,o.GeneratorType.VelRange],c=function(e,t){if(e.id!==t)throw new n.ParseError("Unexpected chunk ID","'".concat(t,"'"),"'".concat(e.id,"'"));if(e.length%i.SF_GENERATOR_SIZE)throw new n.ParseError("Invalid size for the '".concat(t,"' sub-chunk"));return e.iterate(function(e){var r=e.getInt16();return o.GeneratorType[r]?"pgen"===t&&s.includes(r)?null:"igen"===t&&u.includes(r)?null:a.includes(r)?{id:r,range:{lo:e.getByte(),hi:e.getByte()}}:{id:r,value:e.getInt16BE()}:null})}},"./src/chunks/index.ts":function(e,t,r){"use strict";r.r(t);var n=r("./src/chunks/instruments/index.ts");r.d(t,"getInstrumentHeaders",function(){return n.getInstrumentHeaders});var o=r("./src/chunks/presets/index.ts");r.d(t,"getPresetHeaders",function(){return o.getPresetHeaders});var i=r("./src/chunks/samples/index.ts");r.d(t,"getSampleHeaders",function(){return i.getSampleHeaders});var s=r("./src/chunks/generators.ts");r.d(t,"getGenerators",function(){return s.getGenerators});var u=r("./src/chunks/modulators.ts");r.d(t,"getModulators",function(){return u.getModulators});var a=r("./src/chunks/zones.ts");r.d(t,"getZones",function(){return a.getZones}),r.d(t,"getItemsInZone",function(){return a.getItemsInZone})},"./src/chunks/instruments/headers.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"getInstrumentHeaders",function(){return i});var n=r("./src/riff/index.ts"),o=r("./src/constants.ts"),i=function(e){if("inst"!==e.id)throw new n.ParseError("Unexpected chunk ID","'inst'","'".concat(e.id,"'"));if(e.length%o.SF_INSTRUMENT_HEADER_SIZE)throw new n.ParseError("Invalid size for the 'inst' sub-chunk");return e.iterate(function(e){return{name:e.getString(),bagIndex:e.getInt16()}})}},"./src/chunks/instruments/index.ts":function(e,t,r){"use strict";r.r(t);var n=r("./src/chunks/instruments/headers.ts");r.d(t,"getInstrumentHeaders",function(){return n.getInstrumentHeaders})},"./src/chunks/modulators.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"getModulators",function(){return s});var n=r("./src/riff/index.ts"),o=r("./src/constants.ts"),i=function(e){return{type:e>>10&63,polarity:e>>9&1,direction:e>>8&1,palette:e>>7&1,index:127&e}},s=function(e,t){if(e.id!==t)throw new n.ParseError("Unexpected chunk ID","'".concat(t,"'"),"'".concat(e.id,"'"));if(e.length%o.SF_MODULATOR_SIZE)throw new n.ParseError("Invalid size for the '".concat(t,"' sub-chunk"));return e.iterate(function(e){return{source:i(e.getInt16BE()),id:e.getInt16BE(),value:e.getInt16BE(),valueSource:i(e.getInt16BE()),transform:e.getInt16BE()}})}},"./src/chunks/presets/headers.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"getPresetHeaders",function(){return i});var n=r("./src/riff/index.ts"),o=r("./src/constants.ts"),i=function(e){if("phdr"!==e.id)throw new n.ParseError("Invalid chunk ID","'phdr'","'".concat(e.id,"'"));if(e.length%o.SF_PRESET_HEADER_SIZE)throw new n.ParseError("Invalid size for the 'phdr' sub-chunk");return e.iterate(function(e){return{name:e.getString(),preset:e.getInt16(),bank:e.getInt16(),bagIndex:e.getInt16(),library:e.getUInt32(),genre:e.getUInt32(),morphology:e.getUInt32()}})}},"./src/chunks/presets/index.ts":function(e,t,r){"use strict";r.r(t);var n=r("./src/chunks/presets/headers.ts");r.d(t,"getPresetHeaders",function(){return n.getPresetHeaders})},"./src/chunks/samples/headers.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"getSampleHeaders",function(){return i});var n=r("./src/riff/index.ts"),o=r("./src/constants.ts"),i=function(e){if("shdr"!==e.id)throw new n.ParseError("Unexpected chunk ID","'shdr'","'".concat(e.id,"'"));if(e.length%o.SF_SAMPLE_HEADER_SIZE)throw new n.ParseError("Invalid size for the 'shdr' sub-chunk");return e.iterate(function(e){return{name:e.getString(),start:e.getUInt32(),end:e.getUInt32(),startLoop:e.getUInt32(),endLoop:e.getUInt32(),sampleRate:e.getUInt32(),originalPitch:e.getByte(),pitchCorrection:e.getChar(),link:e.getInt16(),type:e.getInt16()}})}},"./src/chunks/samples/index.ts":function(e,t,r){"use strict";r.r(t);var n=r("./src/chunks/samples/headers.ts");r.d(t,"getSampleHeaders",function(){return n.getSampleHeaders})},"./src/chunks/zones.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"getZones",function(){return s}),r.d(t,"getItemsInZone",function(){return u});var n=r("./src/riff/index.ts"),o=r("./src/constants.ts"),i=r("./src/types/index.ts"),s=function(e,t){if(e.id!==t)throw new n.ParseError("Unexpected chunk ID","'".concat(t,"'"),"'".concat(e.id,"'"));if(e.length%o.SF_BAG_SIZE)throw new n.ParseError("Invalid size for the '".concat(t,"' sub-chunk"));return e.iterate(function(e){return{generatorIndex:e.getInt16(),modulatorIndex:e.getInt16()}})},u=function(e,t,r,n,o,s){for(var u=[],l=0;l<e.length;l++){for(var f=e[l],d=e[l+1],p=f.bagIndex,h=d?d.bagIndex:t.length,y=[],v=void 0,g=p;g<h;g++){var E=a(g,t,r),m=c(g,t,n),b=m[i.GeneratorType.KeyRange]&&m[i.GeneratorType.KeyRange].range,S=m[s];if(S){var T=o[S.value];T&&y.push({keyRange:b,modulators:E,generators:m,reference:T})}else g-p==0&&(v={keyRange:b,modulators:E,generators:m})}u.push({header:f,globalZone:v,zones:y})}return u},a=function(e,t,r){var n=t[e],o=t[e+1];return l(n.modulatorIndex,o?o.modulatorIndex:t.length,r)},c=function(e,t,r){var n=t[e],o=t[e+1];return l(n.generatorIndex,o?o.generatorIndex:t.length,r)},l=function(e,t,r){for(var n={},o=e;o<t;o++){var i=r[o];i&&(n[i.id]=i)}return n}},"./src/constants.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"SF_VERSION_LENGTH",function(){return n}),r.d(t,"SF_PRESET_HEADER_SIZE",function(){return o}),r.d(t,"SF_BAG_SIZE",function(){return i}),r.d(t,"SF_MODULATOR_SIZE",function(){return s}),r.d(t,"SF_GENERATOR_SIZE",function(){return u}),r.d(t,"SF_INSTRUMENT_HEADER_SIZE",function(){return a}),r.d(t,"SF_SAMPLE_HEADER_SIZE",function(){return c}),r.d(t,"DEFAULT_SAMPLE_RATE",function(){return l});var n=4,o=38,i=4,s=10,u=4,a=22,c=46,l=22050},"./src/index.ts":function(e,t,r){"use strict";r.r(t);var n=r("./src/types/index.ts");for(var o in n)"default"!==o&&function(e){r.d(t,e,function(){return n[e]})}(o);var i=r("./src/chunk.ts");r.d(t,"SF2Chunk",function(){return i.SF2Chunk});var s=r("./src/constants.ts");r.d(t,"SF_VERSION_LENGTH",function(){return s.SF_VERSION_LENGTH}),r.d(t,"SF_PRESET_HEADER_SIZE",function(){return s.SF_PRESET_HEADER_SIZE}),r.d(t,"SF_BAG_SIZE",function(){return s.SF_BAG_SIZE}),r.d(t,"SF_MODULATOR_SIZE",function(){return s.SF_MODULATOR_SIZE}),r.d(t,"SF_GENERATOR_SIZE",function(){return s.SF_GENERATOR_SIZE}),r.d(t,"SF_INSTRUMENT_HEADER_SIZE",function(){return s.SF_INSTRUMENT_HEADER_SIZE}),r.d(t,"SF_SAMPLE_HEADER_SIZE",function(){return s.SF_SAMPLE_HEADER_SIZE}),r.d(t,"DEFAULT_SAMPLE_RATE",function(){return s.DEFAULT_SAMPLE_RATE});var u=r("./src/soundFont2.ts");r.d(t,"SoundFont2",function(){return u.SoundFont2})},"./src/riff/chunkIterator.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"ChunkIterator",function(){return s});var n=r("./src/utils/index.ts");function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function(){var e,t;function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,r),i(this,"target",[]),i(this,"chunk",void 0),i(this,"position",0),this.chunk=e,this.position=t}return e=[{key:"iterate",value:function(e){for(;this.position<this.chunk.length;){var t=e(this);t&&this.target.push(t)}}},{key:"getString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=Object(n.getStringFromBuffer)(this.getBuffer(this.position,e));return this.position+=e,t}},{key:"getInt16",value:function(){return this.chunk.buffer[this.position++]|this.chunk.buffer[this.position++]<<8}},{key:"getInt16BE",value:function(){return this.getInt16()<<16>>16}},{key:"getUInt32",value:function(){return(this.chunk.buffer[this.position++]|this.chunk.buffer[this.position++]<<8|this.chunk.buffer[this.position++]<<16|this.chunk.buffer[this.position++]<<24)>>>0}},{key:"getByte",value:function(){return this.chunk.buffer[this.position++]}},{key:"getChar",value:function(){return this.chunk.buffer[this.position++]<<24>>24}},{key:"skip",value:function(e){this.position+=e}},{key:"getBuffer",value:function(e,t){return this.chunk.buffer.subarray(e,e+t)}},{key:"currentPosition",get:function(){return this.position}}],o(r.prototype,e),t&&o(r,t),r}()},"./src/riff/index.ts":function(e,t,r){"use strict";r.r(t);var n=r("./src/riff/chunkIterator.ts");r.d(t,"ChunkIterator",function(){return n.ChunkIterator});var o=r("./src/riff/parseError.ts");r.d(t,"ParseError",function(){return o.ParseError});var i=r("./src/riff/parser.ts");r.d(t,"parseBuffer",function(){return i.parseBuffer}),r.d(t,"getChunk",function(){return i.getChunk}),r.d(t,"getChunkLength",function(){return i.getChunkLength}),r.d(t,"getSubChunks",function(){return i.getSubChunks}),r.d(t,"getChunkId",function(){return i.getChunkId});var s=r("./src/riff/riffChunk.ts");r.d(t,"RIFFChunk",function(){return s.RIFFChunk})},"./src/riff/parseError.ts":function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){var t="function"==typeof Map?new Map:void 0;return(o=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return i(e,arguments,u(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),s(r,e)})(e)}function i(e,t,r){return(i=!function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&s(o,r.prototype),o}:Reflect.construct).apply(null,arguments)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.r(t),r.d(t,"ParseError",function(){return a});var a=function(e){function t(e,r,o){var i;return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),(i=u(t).call(this,"".concat(e).concat(r&&o?", expected ".concat(r,", received ").concat(o):"")))&&("object"===n(i)||"function"==typeof i)?i:function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this)}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,o(Error)),t}()},"./src/riff/parser.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"parseBuffer",function(){return s}),r.d(t,"getChunk",function(){return u}),r.d(t,"getChunkLength",function(){return a}),r.d(t,"getSubChunks",function(){return c}),r.d(t,"getChunkId",function(){return l});var n=r("./src/riff/parseError.ts"),o=r("./src/utils/buffer.ts"),i=r("./src/riff/riffChunk.ts"),s=function(e){var t=l(e);if("RIFF"!==t)throw new n.ParseError("Invalid file format","RIFF",t);var r=l(e,8);if("sfbk"!==r)throw new n.ParseError("Invalid signature","sfbk",r);var o=e.subarray(8),s=c(o.subarray(4));return new i.RIFFChunk(t,o.length,o,s)},u=function(e,t){var r=l(e,t),n=a(e,t+4),o=[];return"RIFF"!==r&&"LIST"!==r||(o=c(e.subarray(t+12))),new i.RIFFChunk(r,n,e.subarray(t+8),o)},a=function(e,t){return((e=e.subarray(t,t+4))[0]|e[1]<<8|e[2]<<16|e[3]<<24)>>>0},c=function(e){for(var t=[],r=0;r<=e.length-8;){var n=u(e,r);t.push(n),r=(r+=8+n.length)%2?r+1:r}return t},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(o.getStringFromBuffer)(e.subarray(t,t+4))}},"./src/riff/riffChunk.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"RIFFChunk",function(){return u});var n=r("./src/riff/chunkIterator.ts"),o=r("./src/utils/index.ts");function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=function(){var e,t;function r(e,t,n,o){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,r),s(this,"id",void 0),s(this,"length",void 0),s(this,"buffer",void 0),s(this,"subChunks",void 0),this.id=e,this.length=t,this.buffer=n,this.subChunks=o}return e=[{key:"getString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return Object(o.getStringFromBuffer)(this.getBuffer(e,t||this.length-e))}},{key:"getInt16",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.buffer[e++]|this.buffer[e]<<8}},{key:"getUInt32",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(this.buffer[e++]|this.buffer[e++]<<8|this.buffer[e++]<<16|this.buffer[e]<<24)>>>0}},{key:"getByte",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.buffer[e]}},{key:"getChar",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.buffer[e]<<24>>24}},{key:"iterator",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new n.ChunkIterator(this,e)}},{key:"iterate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=new n.ChunkIterator(this,t);return r.iterate(e),r.target}},{key:"getBuffer",value:function(e,t){return this.buffer.subarray(e,e+t)}}],i(r.prototype,e),t&&i(r,t),r}()},"./src/soundFont2.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"SoundFont2",function(){return d});var n=r("./src/types/index.ts"),o=r("./src/chunk.ts"),i=r("./src/riff/index.ts"),s=r("./src/chunks/index.ts"),u=r("./src/utils/index.ts");function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){f(e,t,r[t])})}return e}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),f(this,"chunk",void 0),f(this,"metaData",void 0),f(this,"sampleData",void 0),f(this,"samples",void 0),f(this,"presetData",void 0),f(this,"instruments",void 0),f(this,"presets",void 0),f(this,"banks",void 0),!(t instanceof o.SF2Chunk)){var r=Object(i.parseBuffer)(t);t=new o.SF2Chunk(r)}if(3!==t.subChunks.length)throw new i.ParseError("Invalid sfbk structure","3 chunks","".concat(t.subChunks.length," chunks"));this.chunk=t,this.metaData=t.subChunks[0].getMetaData(),this.sampleData=t.subChunks[1].getSampleData(),this.presetData=t.subChunks[2].getPresetData(),this.samples=this.getSamples(),this.instruments=this.getInstruments(),this.presets=this.getPresets(),this.banks=this.getBanks()}return l(e,null,[{key:"from",value:function(t){return new e(t)}}]),l(e,[{key:"getKeyData",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(u.memoize)(function(e,r,n){var o=t.banks[r];if(o){var i=o.presets[n];if(i){var s=i.zones.find(function(r){return t.isKeyInRange(r,e)});if(s){var u=s.instrument,c=u.zones.find(function(r){return t.isKeyInRange(r,e)});if(c)return{keyNumber:e,preset:i,instrument:u,sample:c.sample,generators:a({},s.generators,c.generators),modulators:a({},s.modulators,c.modulators)}}}}return null})(e,r,n)}},{key:"isKeyInRange",value:function(e,t){return void 0===e.keyRange||e.keyRange.lo<=t&&e.keyRange.hi>=t}},{key:"getBanks",value:function(){return this.presets.reduce(function(e,t){var r=t.header.bank;return e[r]||(e[r]={presets:[]}),e[r].presets[t.header.preset]=t,e},[])}},{key:"getPresets",value:function(){var e=this.presetData,t=e.presetHeaders,r=e.presetZones,o=e.presetGenerators,i=e.presetModulators;return Object(s.getItemsInZone)(t,r,i,o,this.instruments,n.GeneratorType.Instrument).filter(function(e){return"EOP"!==e.header.name}).map(function(e){return{header:e.header,globalZone:e.globalZone,zones:e.zones.map(function(e){return{keyRange:e.keyRange,generators:e.generators,modulators:e.modulators,instrument:e.reference}})}})}},{key:"getInstruments",value:function(){var e=this.presetData,t=e.instrumentHeaders,r=e.instrumentZones,o=e.instrumentModulators,i=e.instrumentGenerators;return Object(s.getItemsInZone)(t,r,o,i,this.samples,n.GeneratorType.SampleId).filter(function(e){return"EOI"!==e.header.name}).map(function(e){return{header:e.header,globalZone:e.globalZone,zones:e.zones.map(function(e){return{keyRange:e.keyRange,generators:e.generators,modulators:e.modulators,sample:e.reference}})}})}},{key:"getSamples",value:function(){var e=this;return this.presetData.sampleHeaders.filter(function(e){return"EOS"!==e.name}).map(function(t){if("EOS"!==t.name&&t.sampleRate<=0)throw Error("Illegal sample rate of ".concat(t.sampleRate," hz in sample '").concat(t.name,"'"));return t.originalPitch>=128&&t.originalPitch<=254&&(t.originalPitch=60),t.startLoop-=t.start,t.endLoop-=t.start,{header:t,data:new Int16Array(new Uint8Array(e.sampleData.subarray(2*t.start,2*t.end)).buffer)}})}}]),e}()},"./src/types/bank.ts":function(e,t){},"./src/types/generator.ts":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"GeneratorType",function(){return s}),r.d(t,"DEFAULT_GENERATOR_VALUES",function(){return u}),(o=s||(s={}))[o.StartAddrsOffset=0]="StartAddrsOffset",o[o.EndAddrsOffset=1]="EndAddrsOffset",o[o.StartLoopAddrsOffset=2]="StartLoopAddrsOffset",o[o.EndLoopAddrsOffset=3]="EndLoopAddrsOffset",o[o.StartAddrsCoarseOffset=4]="StartAddrsCoarseOffset",o[o.ModLFOToPitch=5]="ModLFOToPitch",o[o.VibLFOToPitch=6]="VibLFOToPitch",o[o.ModEnvToPitch=7]="ModEnvToPitch",o[o.InitialFilterFc=8]="InitialFilterFc",o[o.InitialFilterQ=9]="InitialFilterQ",o[o.ModLFOToFilterFc=10]="ModLFOToFilterFc",o[o.ModEnvToFilterFc=11]="ModEnvToFilterFc",o[o.EndAddrsCoarseOffset=12]="EndAddrsCoarseOffset",o[o.ModLFOToVolume=13]="ModLFOToVolume",o[o.Unused1=14]="Unused1",o[o.ChorusEffectsSend=15]="ChorusEffectsSend",o[o.ReverbEffectsSend=16]="ReverbEffectsSend",o[o.Pan=17]="Pan",o[o.Unused2=18]="Unused2",o[o.Unused3=19]="Unused3",o[o.Unused4=20]="Unused4",o[o.DelayModLFO=21]="DelayModLFO",o[o.FreqModLFO=22]="FreqModLFO",o[o.DelayVibLFO=23]="DelayVibLFO",o[o.FreqVibLFO=24]="FreqVibLFO",o[o.DelayModEnv=25]="DelayModEnv",o[o.AttackModEnv=26]="AttackModEnv",o[o.HoldModEnv=27]="HoldModEnv",o[o.DecayModEnv=28]="DecayModEnv",o[o.SustainModEnv=29]="SustainModEnv",o[o.ReleaseModEnv=30]="ReleaseModEnv",o[o.KeyNumToModEnvHold=31]="KeyNumToModEnvHold",o[o.KeyNumToModEnvDecay=32]="KeyNumToModEnvDecay",o[o.DelayVolEnv=33]="DelayVolEnv",o[o.AttackVolEnv=34]="AttackVolEnv",o[o.HoldVolEnv=35]="HoldVolEnv",o[o.DecayVolEnv=36]="DecayVolEnv",o[o.SustainVolEnv=37]="SustainVolEnv",o[o.ReleaseVolEnv=38]="ReleaseVolEnv",o[o.KeyNumToVolEnvHold=39]="KeyNumToVolEnvHold",o[o.KeyNumToVolEnvDecay=40]="KeyNumToVolEnvDecay",o[o.Instrument=41]="Instrument",o[o.Reserved1=42]="Reserved1",o[o.KeyRange=43]="KeyRange",o[o.VelRange=44]="VelRange",o[o.StartLoopAddrsCoarseOffset=45]="StartLoopAddrsCoarseOffset",o[o.KeyNum=46]="KeyNum",o[o.Velocity=47]="Velocity",o[o.InitialAttenuation=48]="InitialAttenuation",o[o.Reserved2=49]="Reserved2",o[o.EndLoopAddrsCoarseOffset=50]="EndLoopAddrsCoarseOffset",o[o.CoarseTune=51]="CoarseTune",o[o.FineTune=52]="FineTune",o[o.SampleId=53]="SampleId",o[o.SampleModes=54]="SampleModes",o[o.Reserved3=55]="Reserved3",o[o.ScaleTuning=56]="ScaleTuning",o[o.ExclusiveClass=57]="ExclusiveClass",o[o.OverridingRootKey=58]="OverridingRootKey",o[o.Unused5=59]="Unused5",o[o.EndOper=60]="EndOper";var o,i,s,u=(n(i={},s.StartAddrsOffset,0),n(i,s.EndAddrsOffset,0),n(i,s.StartLoopAddrsOffset,0),n(i,s.EndLoopAddrsOffset,0),n(i,s.StartAddrsCoarseOffset,0),n(i,s.ModLFOToPitch,0),n(i,s.VibLFOToPitch,0),n(i,s.ModEnvToPitch,0),n(i,s.InitialFilterFc,13500),n(i,s.InitialFilterQ,0),n(i,s.ModLFOToFilterFc,0),n(i,s.ModEnvToFilterFc,0),n(i,s.EndAddrsCoarseOffset,0),n(i,s.ModLFOToVolume,0),n(i,s.ChorusEffectsSend,0),n(i,s.ReverbEffectsSend,0),n(i,s.Pan,0),n(i,s.DelayModLFO,-12e3),n(i,s.FreqModLFO,0),n(i,s.DelayVibLFO,-12e3),n(i,s.FreqVibLFO,0),n(i,s.DelayModEnv,-12e3),n(i,s.AttackModEnv,-12e3),n(i,s.HoldModEnv,-12e3),n(i,s.DecayModEnv,-12e3),n(i,s.SustainModEnv,0),n(i,s.ReleaseModEnv,-12e3),n(i,s.KeyNumToModEnvHold,0),n(i,s.KeyNumToModEnvDecay,0),n(i,s.DelayVolEnv,-12e3),n(i,s.AttackVolEnv,-12e3),n(i,s.HoldVolEnv,-12e3),n(i,s.DecayVolEnv,-12e3),n(i,s.SustainVolEnv,0),n(i,s.ReleaseVolEnv,-12e3),n(i,s.KeyNumToVolEnvHold,0),n(i,s.KeyNumToVolEnvDecay,0),n(i,s.StartLoopAddrsCoarseOffset,0),n(i,s.KeyNum,-1),n(i,s.Velocity,-1),n(i,s.InitialAttenuation,0),n(i,s.EndLoopAddrsCoarseOffset,0),n(i,s.CoarseTune,0),n(i,s.FineTune,0),n(i,s.SampleModes,0),n(i,s.ScaleTuning,100),n(i,s.ExclusiveClass,0),n(i,s.OverridingRootKey,-1),i)},"./src/types/index.ts":function(e,t,r){"use strict";r.r(t);var n=r("./src/types/bank.ts");for(var o in n)"default"!==o&&function(e){r.d(t,e,function(){return n[e]})}(o);var i=r("./src/types/generator.ts");r.d(t,"GeneratorType",function(){return i.GeneratorType}),r.d(t,"DEFAULT_GENERATOR_VALUES",function(){return i.DEFAULT_GENERATOR_VALUES});var s=r("./src/types/instrument.ts");for(var o in s)0>["GeneratorType","DEFAULT_GENERATOR_VALUES","default"].indexOf(o)&&function(e){r.d(t,e,function(){return s[e]})}(o);var u=r("./src/types/key.ts");for(var o in u)0>["GeneratorType","DEFAULT_GENERATOR_VALUES","default"].indexOf(o)&&function(e){r.d(t,e,function(){return u[e]})}(o);var a=r("./src/types/metaData.ts");for(var o in a)0>["GeneratorType","DEFAULT_GENERATOR_VALUES","default"].indexOf(o)&&function(e){r.d(t,e,function(){return a[e]})}(o);var c=r("./src/types/modulator.ts");r.d(t,"ControllerType",function(){return c.ControllerType}),r.d(t,"ControllerPolarity",function(){return c.ControllerPolarity}),r.d(t,"ControllerDirection",function(){return c.ControllerDirection}),r.d(t,"ControllerPalette",function(){return c.ControllerPalette}),r.d(t,"Controller",function(){return c.Controller}),r.d(t,"TransformType",function(){return c.TransformType}),r.d(t,"DEFAULT_INSTRUMENT_MODULATORS",function(){return c.DEFAULT_INSTRUMENT_MODULATORS});var l=r("./src/types/preset.ts");for(var o in l)0>["GeneratorType","DEFAULT_GENERATOR_VALUES","ControllerType","ControllerPolarity","ControllerDirection","ControllerPalette","Controller","TransformType","DEFAULT_INSTRUMENT_MODULATORS","default"].indexOf(o)&&function(e){r.d(t,e,function(){return l[e]})}(o);var f=r("./src/types/presetData.ts");for(var o in f)0>["GeneratorType","DEFAULT_GENERATOR_VALUES","ControllerType","ControllerPolarity","ControllerDirection","ControllerPalette","Controller","TransformType","DEFAULT_INSTRUMENT_MODULATORS","default"].indexOf(o)&&function(e){r.d(t,e,function(){return f[e]})}(o);var d=r("./src/types/sample.ts");r.d(t,"SampleType",function(){return d.SampleType});var p=r("./src/types/zone.ts");for(var o in p)0>["GeneratorType","DEFAULT_GENERATOR_VALUES","ControllerType","ControllerPolarity","ControllerDirection","ControllerPalette","Controller","TransformType","DEFAULT_INSTRUMENT_MODULATORS","SampleType","default"].indexOf(o)&&function(e){r.d(t,e,function(){return p[e]})}(o)},"./src/types/instrument.ts":function(e,t){},"./src/types/key.ts":function(e,t){},"./src/types/metaData.ts":function(e,t){},"./src/types/modulator.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"ControllerType",function(){return c}),r.d(t,"ControllerPolarity",function(){return l}),r.d(t,"ControllerDirection",function(){return f}),r.d(t,"ControllerPalette",function(){return d}),r.d(t,"Controller",function(){return p}),r.d(t,"TransformType",function(){return h}),r.d(t,"DEFAULT_INSTRUMENT_MODULATORS",function(){return v});var n,o,i,s,u,a,c,l,f,d,p,h,y=r("./src/types/generator.ts");(n=c||(c={}))[n.Linear=0]="Linear",n[n.Concave=1]="Concave",n[n.Convex=2]="Convex",n[n.Switch=3]="Switch",(o=l||(l={}))[o.Unipolar=0]="Unipolar",o[o.Bipolar=1]="Bipolar",(i=f||(f={}))[i.Increasing=0]="Increasing",i[i.Decreasing=1]="Decreasing",(s=d||(d={}))[s.GeneralController=0]="GeneralController",s[s.MidiController=1]="MidiController",(u=p||(p={}))[u.NoController=0]="NoController",u[u.NoteOnVelocity=2]="NoteOnVelocity",u[u.NoteOnKeyNumber=3]="NoteOnKeyNumber",u[u.PolyPressure=10]="PolyPressure",u[u.ChannelPressure=13]="ChannelPressure",u[u.PitchWheel=14]="PitchWheel",u[u.PitchWheelSensitivity=16]="PitchWheelSensitivity",u[u.Link=127]="Link",(a=h||(h={}))[a.Linear=0]="Linear",a[a.Absolute=2]="Absolute";var v=[{id:y.GeneratorType.InitialAttenuation,source:{type:c.Concave,polarity:l.Unipolar,direction:f.Decreasing,palette:d.GeneralController,index:p.NoteOnVelocity},value:960,valueSource:{type:c.Linear,polarity:l.Unipolar,direction:f.Increasing,palette:d.GeneralController,index:p.NoController},transform:h.Linear},{id:y.GeneratorType.InitialFilterFc,source:{type:c.Linear,polarity:l.Unipolar,direction:f.Decreasing,palette:d.GeneralController,index:p.NoteOnVelocity},value:-2400,valueSource:{type:c.Linear,polarity:l.Unipolar,direction:f.Increasing,palette:d.GeneralController,index:p.NoController},transform:h.Linear},{id:y.GeneratorType.VibLFOToPitch,source:{type:c.Linear,polarity:l.Unipolar,direction:f.Increasing,palette:d.GeneralController,index:p.ChannelPressure},value:50,valueSource:{type:c.Linear,polarity:l.Unipolar,direction:f.Increasing,palette:d.GeneralController,index:p.NoController},transform:h.Linear},{id:y.GeneratorType.VibLFOToPitch,source:{type:c.Linear,polarity:l.Unipolar,direction:f.Increasing,palette:d.MidiController,index:1},value:50,valueSource:{type:c.Linear,polarity:l.Unipolar,direction:f.Increasing,palette:d.GeneralController,index:p.NoController},transform:h.Linear},{id:y.GeneratorType.InitialAttenuation,source:{type:c.Concave,polarity:l.Unipolar,direction:f.Decreasing,palette:d.MidiController,index:7},value:960,valueSource:{type:c.Linear,polarity:l.Unipolar,direction:f.Increasing,palette:d.GeneralController,index:p.NoController},transform:h.Linear},{id:y.GeneratorType.InitialAttenuation,source:{type:c.Linear,polarity:l.Bipolar,direction:f.Increasing,palette:d.MidiController,index:10},value:1e3,valueSource:{type:c.Linear,polarity:l.Unipolar,direction:f.Increasing,palette:d.GeneralController,index:p.NoController},transform:h.Linear},{id:y.GeneratorType.InitialAttenuation,source:{type:c.Concave,polarity:l.Unipolar,direction:f.Decreasing,palette:d.MidiController,index:11},value:960,valueSource:{type:c.Linear,polarity:l.Unipolar,direction:f.Increasing,palette:d.GeneralController,index:p.NoController},transform:h.Linear},{id:y.GeneratorType.ReverbEffectsSend,source:{type:c.Linear,polarity:l.Unipolar,direction:f.Increasing,palette:d.MidiController,index:91},value:200,valueSource:{type:c.Linear,polarity:l.Unipolar,direction:f.Increasing,palette:d.GeneralController,index:p.NoController},transform:h.Linear},{id:y.GeneratorType.ChorusEffectsSend,source:{type:c.Linear,polarity:l.Unipolar,direction:f.Increasing,palette:d.MidiController,index:93},value:200,valueSource:{type:c.Linear,polarity:l.Unipolar,direction:f.Increasing,palette:d.GeneralController,index:p.NoController},transform:h.Linear},{id:y.GeneratorType.CoarseTune,source:{type:c.Linear,polarity:l.Bipolar,direction:f.Increasing,palette:d.GeneralController,index:p.PitchWheel},value:12700,valueSource:{type:c.Linear,polarity:l.Unipolar,direction:f.Increasing,palette:d.GeneralController,index:p.PitchWheelSensitivity},transform:h.Linear}]},"./src/types/preset.ts":function(e,t){},"./src/types/presetData.ts":function(e,t){},"./src/types/sample.ts":function(e,t,r){"use strict";var n,o;r.r(t),r.d(t,"SampleType",function(){return n}),(o=n||(n={}))[o.EOS=0]="EOS",o[o.Mono=1]="Mono",o[o.Right=2]="Right",o[o.Left=4]="Left",o[o.Linked=8]="Linked",o[o.RomMono=32769]="RomMono",o[o.RomRight=32770]="RomRight",o[o.RomLeft=32772]="RomLeft",o[o.RomLinked=32776]="RomLinked"},"./src/types/zone.ts":function(e,t){},"./src/utils/buffer.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"getStringFromBuffer",function(){return n});var n=function(e){return new TextDecoder("utf8").decode(e).split(/\0/)[0].trim()}},"./src/utils/index.ts":function(e,t,r){"use strict";r.r(t);var n=r("./src/utils/buffer.ts");r.d(t,"getStringFromBuffer",function(){return n.getStringFromBuffer});var o=r("./src/utils/memoize.ts");r.d(t,"memoize",function(){return o.memoize})},"./src/utils/memoize.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"memoize",function(){return n});var n=function(e){var t={};return function(){for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];var i=JSON.stringify(n);if(i in t)return t[i];var s=e.apply(void 0,n);return t[i]=s,s}}}})},e.exports=t()}}]);