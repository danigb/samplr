(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";function b64ToUint6(nChr){return nChr>64&&nChr<91?nChr-65:nChr>96&&nChr<123?nChr-71:nChr>47&&nChr<58?nChr+4:nChr===43?62:nChr===47?63:0}function base64DecodeToArray(sBase64,nBlocksSize){var sB64Enc=sBase64.replace(/[^A-Za-z0-9\+\/]/g,"");var nInLen=sB64Enc.length;var nOutLen=nBlocksSize?Math.ceil((nInLen*3+1>>2)/nBlocksSize)*nBlocksSize:nInLen*3+1>>2;var taBytes=new Uint8Array(nOutLen);for(var nMod3,nMod4,nUint24=0,nOutIdx=0,nInIdx=0;nInIdx<nInLen;nInIdx++){nMod4=nInIdx&3;nUint24|=b64ToUint6(sB64Enc.charCodeAt(nInIdx))<<18-6*nMod4;if(nMod4===3||nInLen-nInIdx===1){for(nMod3=0;nMod3<3&&nOutIdx<nOutLen;nMod3++,nOutIdx++){taBytes[nOutIdx]=nUint24>>>(16>>>nMod3&24)&255}nUint24=0}}return taBytes}module.exports=base64DecodeToArray},{}],2:[function(require,module,exports){"use strict";var b64decode=require("./b64decode.js");var PREFIXED=/^(@[\w-]+)\/(.*)$/;function loader(ac,options){var opts=options||{};var fetch=opts.fetch||httpRequest;var prefixes=PREFIXES;return function load(value){if(value instanceof ArrayBuffer)return loadArrayBuffer(ac,value);else if(Array.isArray(value))return loadArrayData(value,load);else if(typeof value==="object")return loadObjectData(value,load);else if(typeof value==="string"){if(/^data:audio/.test(value))return decodeBase64(value,load);else if(/\.json$/.test(value))return loadJsonFile(value,load,fetch);else if(PREFIXED.test(value))return loadPrefix(prefixes,value,load,fetch);else return loadAudioFile(value,load,fetch)}else return Promise.reject("Value not valid: "+value)}}function loadArrayBuffer(ac,data){if(!(data instanceof ArrayBuffer))return null;return new Promise(function(done,reject){ac.decodeAudioData(data,function(buffer){done(buffer)},function(){reject("Can't decode audio data ("+data.slice(0,30)+"...)")})})}function loadArrayData(array,load){return Promise.all(array.map(load))}function loadObjectData(object,load){var source=object.samples?object.samples:object;var buffers={};var promises=Object.keys(source).map(function(key){return load(source[key]).then(function(b){buffers[key]=b})});return Promise.all(promises).then(function(){if(!object.samples)return buffers;object.samples=buffers;return object})}function decodeBase64(data,load){var payload=data.split(",")[1];return load(b64decode(payload).buffer)}function loadAudioFile(url,load,fetch){return load(fetch(url,"arraybuffer"))}function loadJsonFile(url,load,fetch){return load(fetch(url,"json"))}function loadPrefix(prefixes,value,load,fetch){var m=PREFIXED.exec(value);var fn=prefixes[m[1]];return fn?fn(m[2],load,fetch):Promise.reject("Unknown prefix: "+m[1])}var PREFIXES={"@midijs":function(url,load,fetch){return fetch(url,"text").then(function(data){var begin=data.indexOf("MIDI.Soundfont.");if(begin<0)throw Error("Invalid MIDI.js Soundfont format");begin=data.indexOf("=",begin)+2;var end=data.lastIndexOf(",");return JSON.parse(data.slice(begin,end)+"}")}).then(load)},"@soundfont":function(name,load){var url="https://cdn.rawgit.com/gleitz/midi-js-Soundfonts/master/FluidR3_GM/"+name+"-ogg.js";return load("@midijs/"+url)},"@drum-machines":function(name,load){var path=name+"/"+name+".json";var url="https://cdn.rawgit.com/danigb/samplr/master/packages/drum-machines/"+path;return load(url)}};function httpRequest(url,type){return new Promise(function(done,reject){var req=new XMLHttpRequest;if(type)req.responseType=type;req.open("GET",url);req.onload=function(){if(req.status===200){done(req.response)}else{reject(Error(req.statusText))}};req.onerror=function(){reject(Error("Network Error"))};req.send()})}module.exports=loader},{"./b64decode.js":1}]},{},[2]);